<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/admin/config-lbaas.rst">
    <target refid="config-lbaas"></target>
    <section ids="load-balancer-as-a-service-lbaas config-lbaas" names="load\ balancer\ as\ a\ service\ (lbaas) config-lbaas">
        <title>Load Balancer as a Service (LBaaS)</title>
        <paragraph>The Networking service offers a load balancer feature called “LBaaS v2”
            through the <literal>neutron-lbaas</literal> service plug-in.</paragraph>
        <paragraph>LBaaS v2 adds the concept of listeners to the LBaaS v1 load balancers.
            LBaaS v2 allows you to configure multiple listener ports on a single load
            balancer IP address.</paragraph>
        <paragraph>There are two reference implementations of LBaaS v2.
            The one is an agent based implementation with HAProxy.
            The agents handle the HAProxy configuration and manage the HAProxy daemon.
            Another LBaaS v2 implementation, <reference name="Octavia" refuri="https://docs.openstack.org/octavia/latest/">Octavia</reference><target ids="octavia" names="octavia" refuri="https://docs.openstack.org/octavia/latest/"></target>, has a separate API and
            separate worker processes that build load balancers within virtual machines on
            hypervisors that are managed by the Compute service. You do not need an agent
            for Octavia.</paragraph>
        <note>
            <paragraph>LBaaS v1 was removed in the Newton release. These links provide more
                details about how LBaaS v1 works and how to configure it:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><reference name="Load-Balancer-as-a-Service (LBaaS) overview" refuri="https://docs.openstack.org/admin-guide/networking-introduction.html#load-balancer-as-a-service-lbaas-overview">Load-Balancer-as-a-Service (LBaaS) overview</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="Basic Load-Balancer-as-a-Service operations" refuri="https://docs.openstack.org/admin-guide/networking-adv-features.html#basic-load-balancer-as-a-service-operations">Basic Load-Balancer-as-a-Service operations</reference></paragraph>
                </list_item>
            </bullet_list>
        </note>
        <warning>
            <paragraph>Currently, no migration path exists between v1 and v2 load balancers. If you
                choose to switch from v1 to v2, you must recreate all load balancers, pools,
                and health monitors.</paragraph>
        </warning>
        <comment xml:space="preserve">TODO(amotoki): Data mirgation from v1 to v2 is provided in Newton release,
but its usage is not documented enough. It should be added here.</comment>
        <section ids="lbaas-v2-concepts" names="lbaas\ v2\ concepts">
            <title>LBaaS v2 Concepts</title>
            <paragraph>LBaaS v2 has several new concepts to understand:</paragraph>
            <image alt="LBaaS v2 layout" candidates="{'*': 'admin/figures/lbaasv2-diagram.png'}" uri="admin/figures/lbaasv2-diagram.png"></image>
            <definition_list>
                <definition_list_item>
                    <term>Load balancer</term>
                    <definition>
                        <paragraph>The load balancer occupies a neutron network port and has an IP address
                            assigned from a subnet.</paragraph>
                    </definition>
                </definition_list_item>
                <definition_list_item>
                    <term>Listener</term>
                    <definition>
                        <paragraph>Load balancers can listen for requests on multiple ports. Each one of those
                            ports is specified by a listener.</paragraph>
                    </definition>
                </definition_list_item>
                <definition_list_item>
                    <term>Pool</term>
                    <definition>
                        <paragraph>A pool holds a list of members that serve content through the load balancer.</paragraph>
                    </definition>
                </definition_list_item>
                <definition_list_item>
                    <term>Member</term>
                    <definition>
                        <paragraph>Members are servers that serve traffic behind a load balancer. Each member
                            is specified by the IP address and port that it uses to serve traffic.</paragraph>
                    </definition>
                </definition_list_item>
                <definition_list_item>
                    <term>Health monitor</term>
                    <definition>
                        <paragraph>Members may go offline from time to time and health monitors divert traffic
                            away from members that are not responding properly. Health monitors are
                            associated with pools.</paragraph>
                    </definition>
                </definition_list_item>
            </definition_list>
            <paragraph>LBaaS v2 has multiple implementations via different service plug-ins. The two
                most common implementations use either an agent or the Octavia services. Both
                implementations use the <reference name="LBaaS v2 API" refuri="https://developer.openstack.org/api-ref/networking/v2/#lbaas-2-0-stable">LBaaS v2 API</reference><target ids="lbaas-v2-api" names="lbaas\ v2\ api" refuri="https://developer.openstack.org/api-ref/networking/v2/#lbaas-2-0-stable"></target>.</paragraph>
        </section>
        <section ids="configurations" names="configurations">
            <title>Configurations</title>
            <section ids="configuring-lbaas-v2-with-an-agent" names="configuring\ lbaas\ v2\ with\ an\ agent">
                <title>Configuring LBaaS v2 with an agent</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Add the LBaaS v2 service plug-in to the <literal>service_plugins</literal> configuration
                            directive in <literal>/etc/neutron/neutron.conf</literal>. The plug-in list is
                            comma-separated:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">service_plugins = [existing service plugins],neutron_lbaas.services.loadbalancer.plugin.LoadBalancerPluginv2</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Add the LBaaS v2 service provider to the <literal>service_provider</literal> configuration
                            directive within the <literal>[service_providers]</literal> section in
                            <literal>/etc/neutron/neutron_lbaas.conf</literal>:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">service_provider = LOADBALANCERV2:Haproxy:neutron_lbaas.drivers.haproxy.plugin_driver.HaproxyOnHostPluginDriver:default</literal_block>
                        <paragraph>If you have existing service providers for other networking service
                            plug-ins, such as VPNaaS or FWaaS, add the <literal>service_provider</literal> line shown
                            above in the <literal>[service_providers]</literal> section as a separate line. These
                            configuration directives are repeatable and are not comma-separated.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Select the driver that manages virtual interfaces in
                            <literal>/etc/neutron/lbaas_agent.ini</literal>:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">[DEFAULT]
device_driver = neutron_lbaas.drivers.haproxy.namespace_driver.HaproxyNSDriver
interface_driver = INTERFACE_DRIVER
[haproxy]
user_group = haproxy</literal_block>
                        <paragraph>Replace <literal>INTERFACE_DRIVER</literal> with the interface driver that the layer-2
                            agent in your environment uses. For example, <literal>openvswitch</literal> for Open
                            vSwitch or <literal>linuxbridge</literal> for Linux bridge.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Run the <literal>neutron-lbaas</literal> database migration:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">neutron-db-manage --subproject neutron-lbaas upgrade head</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>If you have deployed LBaaS v1, <strong>stop the LBaaS v1 agent now</strong>. The v1 and
                            v2 agents <strong>cannot</strong> run simultaneously.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Start the LBaaS v2 agent:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">neutron-lbaasv2-agent \
--config-file /etc/neutron/neutron.conf \
--config-file /etc/neutron/lbaas_agent.ini</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Restart the Network service to activate the new configuration. You are now
                            ready to create load balancers with the LBaaS v2 agent.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="configuring-lbaas-v2-with-octavia" names="configuring\ lbaas\ v2\ with\ octavia">
                <title>Configuring LBaaS v2 with Octavia</title>
                <paragraph>Octavia provides additional capabilities for load balancers, including using a
                    compute driver to build instances that operate as load balancers.
                    The <reference name="Hands on Lab - Install and Configure OpenStack Octavia" refuri="https://www.openstack.org/summit/tokyo-2015/videos/presentation/rsvp-required-hands-on-lab-install-and-configure-openstack-octavia">Hands on Lab - Install and Configure OpenStack Octavia</reference><target ids="hands-on-lab-install-and-configure-openstack-octavia" names="hands\ on\ lab\ -\ install\ and\ configure\ openstack\ octavia" refuri="https://www.openstack.org/summit/tokyo-2015/videos/presentation/rsvp-required-hands-on-lab-install-and-configure-openstack-octavia"></target>
                    session at the OpenStack Summit in Tokyo provides an overview of Octavia.</paragraph>
                <paragraph>The DevStack documentation offers a <reference name="simple method to deploy Octavia" refuri="https://docs.openstack.org/devstack/latest/guides/devstack-with-lbaas-v2.html">simple method to deploy Octavia</reference><target ids="simple-method-to-deploy-octavia" names="simple\ method\ to\ deploy\ octavia" refuri="https://docs.openstack.org/devstack/latest/guides/devstack-with-lbaas-v2.html"></target>
                    and test the service with redundant load balancer instances. If you already
                    have Octavia installed and configured within your environment, you can
                    configure the Network service to use Octavia:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Add the LBaaS v2 service plug-in to the <literal>service_plugins</literal> configuration
                            directive in <literal>/etc/neutron/neutron.conf</literal>. The plug-in list is
                            comma-separated:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">service_plugins = [existing service plugins],neutron_lbaas.services.loadbalancer.plugin.LoadBalancerPluginv2</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Add the Octavia service provider to the <literal>service_provider</literal> configuration
                            directive within the <literal>[service_providers]</literal> section in
                            <literal>/etc/neutron/neutron_lbaas.conf</literal>:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">service_provider = LOADBALANCERV2:Octavia:neutron_lbaas.drivers.octavia.driver.OctaviaDriver:default</literal_block>
                        <paragraph>Ensure that the LBaaS v1 and v2 service providers are removed from the
                            <literal>[service_providers]</literal> section. They are not used with Octavia. <strong>Verify
                                that all LBaaS agents are stopped.</strong></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Restart the Network service to activate the new configuration. You are now
                            ready to create and manage load balancers with Octavia.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="add-lbaas-panels-to-dashboard" names="add\ lbaas\ panels\ to\ dashboard">
                <title>Add LBaaS panels to Dashboard</title>
                <paragraph>The Dashboard panels for managing LBaaS v2 are available starting with the
                    Mitaka release.</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Clone the <reference name="neutron-lbaas-dashboard repository" refuri="https://git.openstack.org/cgit/openstack/neutron-lbaas-dashboard/">neutron-lbaas-dashboard repository</reference>
                            and check out the release
                            branch that matches the installed version of Dashboard:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ git clone https://git.openstack.org/openstack/neutron-lbaas-dashboard
$ cd neutron-lbaas-dashboard
$ git checkout OPENSTACK_RELEASE</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Install the Dashboard panel plug-in:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ python setup.py install</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Copy the <literal>_1481_project_ng_loadbalancersv2_panel.py</literal> file from the
                            <literal>neutron-lbaas-dashboard/enabled</literal> directory into the Dashboard
                            <literal>openstack_dashboard/local/enabled</literal> directory.</paragraph>
                        <paragraph>This step ensures that Dashboard can find the plug-in when it enumerates
                            all of its available panels.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Enable the plug-in in Dashboard by editing the <literal>local_settings.py</literal> file
                            and setting <literal>enable_lb</literal> to <literal>True</literal> in the <literal>OPENSTACK_NEUTRON_NETWORK</literal>
                            dictionary.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>If Dashboard is configured to compress static files for better performance
                            (usually set through <literal>COMPRESS_OFFLINE</literal> in <literal>local_settings.py</literal>),
                            optimize the static files again:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ ./manage.py collectstatic
$ ./manage.py compress</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Restart Apache to activate the new panel:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ sudo service apache2 restart</literal_block>
                    </list_item>
                </enumerated_list>
                <paragraph>To find the panel, click on <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> in Dashboard, then click the
                    <inline classes="guilabel" rawtext=":guilabel:`Network`">Network</inline> drop-down menu and select <inline classes="guilabel" rawtext=":guilabel:`Load Balancers`">Load Balancers</inline>.</paragraph>
            </section>
        </section>
        <section ids="lbaas-v2-operations" names="lbaas\ v2\ operations">
            <title>LBaaS v2 operations</title>
            <paragraph>The same neutron commands are used for LBaaS v2 with an agent or with Octavia.</paragraph>
            <section ids="building-an-lbaas-v2-load-balancer" names="building\ an\ lbaas\ v2\ load\ balancer">
                <title>Building an LBaaS v2 load balancer</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Start by creating a load balancer on a network. In this example, the
                            <literal>private</literal> network is an isolated network with two web server instances:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-loadbalancer-create --name test-lb private-subnet</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>You can view the load balancer status and IP address with the
                            <literal_strong classes="command">neutron lbaas-loadbalancer-show</literal_strong> command:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-loadbalancer-show test-lb
+---------------------+------------------------------------------------+
| Field               | Value                                          |
+---------------------+------------------------------------------------+
| admin_state_up      | True                                           |
| description         |                                                |
| id                  | 7780f9dd-e5dd-43a9-af81-0d2d1bd9c386           |
| listeners           | {"id": "23442d6a-4d82-40ee-8d08-243750dbc191"} |
|                     | {"id": "7e0d084d-6d67-47e6-9f77-0115e6cf9ba8"} |
| name                | test-lb                                        |
| operating_status    | ONLINE                                         |
| provider            | octavia                                        |
| provisioning_status | ACTIVE                                         |
| tenant_id           | fbfce4cb346c4f9097a977c54904cafd               |
| vip_address         | 192.0.2.22                                     |
| vip_port_id         | 9f8f8a75-a731-4a34-b622-864907e1d556           |
| vip_subnet_id       | f1e7827d-1bfe-40b6-b8f0-2d9fd946f59b           |
+---------------------+------------------------------------------------+</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Update the security group to allow traffic to reach the new load balancer.
                            Create a new security group along with ingress rules to allow traffic into
                            the new load balancer. The neutron port for the load balancer is shown as
                            <literal>vip_port_id</literal> above.</paragraph>
                        <paragraph>Create a security group and rules to allow TCP port 80, TCP port 443, and
                            all ICMP traffic:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron security-group-create lbaas
$ neutron security-group-rule-create \
  --direction ingress \
  --protocol tcp \
  --port-range-min 80 \
  --port-range-max 80 \
  --remote-ip-prefix 0.0.0.0/0 \
  lbaas
$ neutron security-group-rule-create \
  --direction ingress \
  --protocol tcp \
  --port-range-min 443 \
  --port-range-max 443 \
  --remote-ip-prefix 0.0.0.0/0 \
  lbaas
$ neutron security-group-rule-create \
  --direction ingress \
  --protocol icmp \
  lbaas</literal_block>
                        <paragraph>Apply the security group to the load balancer’s network port using
                            <literal>vip_port_id</literal> from the <literal_strong classes="command">neutron lbaas-loadbalancer-show</literal_strong>
                            command:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron port-update \
  --security-group lbaas \
  9f8f8a75-a731-4a34-b622-864907e1d556</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="adding-an-http-listener" names="adding\ an\ http\ listener">
                <title>Adding an HTTP listener</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>With the load balancer online, you can add a listener for plaintext
                            HTTP traffic on port 80:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-listener-create \
  --name test-lb-http \
  --loadbalancer test-lb \
  --protocol HTTP \
  --protocol-port 80</literal_block>
                        <paragraph>This load balancer is active and ready to serve traffic on <literal>192.0.2.22</literal>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Verify that the load balancer is responding to pings before moving further:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ ping -c 4 192.0.2.22
PING 192.0.2.22 (192.0.2.22) 56(84) bytes of data.
64 bytes from 192.0.2.22: icmp_seq=1 ttl=62 time=0.410 ms
64 bytes from 192.0.2.22: icmp_seq=2 ttl=62 time=0.407 ms
64 bytes from 192.0.2.22: icmp_seq=3 ttl=62 time=0.396 ms
64 bytes from 192.0.2.22: icmp_seq=4 ttl=62 time=0.397 ms

--- 192.0.2.22 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 2997ms
rtt min/avg/max/mdev = 0.396/0.402/0.410/0.020 ms</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>You can begin building a pool and adding members to the pool to serve HTTP
                            content on port 80. For this example, the web servers are <literal>192.0.2.16</literal>
                            and <literal>192.0.2.17</literal>:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-pool-create \
  --name test-lb-pool-http \
  --lb-algorithm ROUND_ROBIN \
  --listener test-lb-http \
  --protocol HTTP
$ neutron lbaas-member-create \
  --name test-lb-http-member-1 \
  --subnet private-subnet \
  --address 192.0.2.16 \
  --protocol-port 80 \
  test-lb-pool-http
$ neutron lbaas-member-create \
  --name test-lb-http-member-2 \
  --subnet private-subnet \
  --address 192.0.2.17 \
  --protocol-port 80 \
  test-lb-pool-http</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>You can use <literal>curl</literal> to verify connectivity through the load balancers to
                            your web servers:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ curl 192.0.2.22
web2
$ curl 192.0.2.22
web1
$ curl 192.0.2.22
web2
$ curl 192.0.2.22
web1</literal_block>
                        <paragraph>In this example, the load balancer uses the round robin algorithm and the
                            traffic alternates between the web servers on the backend.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>You can add a health monitor so that unresponsive servers are removed
                            from the pool:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-healthmonitor-create \
  --name test-lb-http-monitor \
  --delay 5 \
  --max-retries 2 \
  --timeout 10 \
  --type HTTP \
  --pool test-lb-pool-http</literal_block>
                        <paragraph>In this example, the health monitor removes the server from the pool if
                            it fails a health check at two five-second intervals. When the server
                            recovers and begins responding to health checks again, it is added to
                            the pool once again.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="adding-an-https-listener" names="adding\ an\ https\ listener">
                <title>Adding an HTTPS listener</title>
                <paragraph>You can add another listener on port 443 for HTTPS traffic. LBaaS v2 offers
                    SSL/TLS termination at the load balancer, but this example takes a simpler
                    approach and allows encrypted connections to terminate at each member server.</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Start by creating a listener, attaching a pool, and then adding members:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-listener-create \
  --name test-lb-https \
  --loadbalancer test-lb \
  --protocol HTTPS \
  --protocol-port 443
$ neutron lbaas-pool-create \
  --name test-lb-pool-https \
  --lb-algorithm LEAST_CONNECTIONS \
  --listener test-lb-https \
  --protocol HTTPS
$ neutron lbaas-member-create \
  --name test-lb-https-member-1 \
  --subnet private-subnet \
  --address 192.0.2.16 \
  --protocol-port 443 \
  test-lb-pool-https
$ neutron lbaas-member-create \
  --name test-lb-https-member-2 \
  --subnet private-subnet \
  --address 192.0.2.17 \
  --protocol-port 443 \
  test-lb-pool-https</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>You can also add a health monitor for the HTTPS pool:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-healthmonitor-create \
  --name test-lb-https-monitor \
  --delay 5 \
  --max-retries 2 \
  --timeout 10 \
  --type HTTPS \
  --pool test-lb-pool-https</literal_block>
                        <paragraph>The load balancer now handles traffic on ports 80 and 443.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="associating-a-floating-ip-address" names="associating\ a\ floating\ ip\ address">
                <title>Associating a floating IP address</title>
                <paragraph>Load balancers that are deployed on a public or provider network that are
                    accessible to external clients do not need a floating IP address assigned.
                    External clients can directly access the virtual IP address (VIP) of those
                    load balancers.</paragraph>
                <paragraph>However, load balancers deployed onto private or isolated networks need a
                    floating IP address assigned if they must be accessible to external clients. To
                    complete this step, you must have a router between the private and public
                    networks and an available floating IP address.</paragraph>
                <paragraph>You can use the <literal_strong classes="command">neutron lbaas-loadbalancer-show</literal_strong> command from the
                    beginning of this section to locate the <literal>vip_port_id</literal>. The <literal>vip_port_id</literal>
                    is the ID of the network port that is assigned to the load balancer. You can
                    associate a free floating IP address to the load balancer using
                    <literal_strong classes="command">neutron floatingip-associate</literal_strong>:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron floatingip-associate FLOATINGIP_ID LOAD_BALANCER_PORT_ID</literal_block>
            </section>
            <section ids="setting-quotas-for-lbaas-v2" names="setting\ quotas\ for\ lbaas\ v2">
                <title>Setting quotas for LBaaS v2</title>
                <paragraph>Quotas are available for limiting the number of load balancers and load
                    balancer pools. By default, both quotas are set to 10.</paragraph>
                <paragraph>You can adjust quotas using the <literal_strong classes="command">neutron quota-update</literal_strong> command:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron quota-update --tenant-id TENANT_UUID --loadbalancer 25
$ neutron quota-update --tenant-id TENANT_UUID --pool 50</literal_block>
                <paragraph>A setting of <literal>-1</literal> disables the quota for a tenant.</paragraph>
            </section>
            <section ids="retrieving-load-balancer-statistics" names="retrieving\ load\ balancer\ statistics">
                <title>Retrieving load balancer statistics</title>
                <paragraph>The LBaaS v2 agent collects four types of statistics for each load balancer
                    every six seconds. Users can query these statistics with the
                    <literal_strong classes="command">neutron lbaas-loadbalancer-stats</literal_strong> command:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron lbaas-loadbalancer-stats test-lb
+--------------------+----------+
| Field              | Value    |
+--------------------+----------+
| active_connections | 0        |
| bytes_in           | 40264557 |
| bytes_out          | 71701666 |
| total_connections  | 384601   |
+--------------------+----------+</literal_block>
                <paragraph>The <literal>active_connections</literal> count is the total number of connections that were
                    active at the time the agent polled the load balancer. The other three
                    statistics are cumulative since the load balancer was last started. For
                    example, if the load balancer restarts due to a system error or a configuration
                    change, these statistics will be reset.</paragraph>
            </section>
        </section>
    </section>
</document>
