<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/admin/neutron_linuxbridge.rst">
    <section ids="neutron-linuxbridge-cleanup-utility" names="neutron-linuxbridge-cleanup\ utility">
        <title>neutron-linuxbridge-cleanup utility</title>
        <section ids="description" names="description">
            <title>Description</title>
            <paragraph>Automated removal of empty bridges has been disabled to fix a race condition
                between the Compute (nova) and Networking (neutron) services. Previously, it
                was possible for a bridge to be deleted during the time when the only instance
                using it was rebooted.</paragraph>
        </section>
        <section ids="usage" names="usage">
            <title>Usage</title>
            <paragraph>Use this script to remove empty bridges on compute nodes by running the
                following command:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron-linuxbridge-cleanup</literal_block>
            <important>
                <paragraph>Do not use this tool when creating or migrating an instance as it
                    throws an error when the bridge does not exist.</paragraph>
            </important>
            <note>
                <paragraph>Using this script can still trigger the original race condition. Only
                    run this script if you have evacuated all instances off a compute
                    node and you want to clean up the bridges. In addition to evacuating
                    all instances, you should fence off the compute node where you are going
                    to run this script so new instances do not get scheduled on it.</paragraph>
            </note>
        </section>
    </section>
</document>
