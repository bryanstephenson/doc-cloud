<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/admin/archives/config-plugins.rst">
    <section ids="plug-in-configurations" names="plug-in\ configurations">
        <title>Plug-in configurations</title>
        <paragraph>For configurations options, see <reference name="Networking configuration options" refuri="https://docs.openstack.org/ocata/config-reference/networking/networking_options_reference.html">Networking configuration
                options</reference>
            in Configuration Reference. These sections explain how to configure
            specific plug-ins.</paragraph>
        <section ids="configure-big-switch-floodlight-rest-proxy-plug-in" names="configure\ big\ switch\ (floodlight\ rest\ proxy)\ plug-in">
            <title>Configure Big Switch (Floodlight REST Proxy) plug-in</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/neutron.conf</literal> file and add this line:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">core_plugin = bigswitch</literal_block>
                </list_item>
                <list_item>
                    <paragraph>In the <literal>/etc/neutron/neutron.conf</literal> file, set the <literal>service_plugins</literal>
                        option:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">service_plugins = neutron.plugins.bigswitch.l3_router_plugin.L3RestProxy</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/plugins/bigswitch/restproxy.ini</literal> file for the
                        plug-in and specify a comma-separated list of controller_ip:port pairs:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">server = CONTROLLER_IP:PORT</literal_block>
                    <paragraph>For database configuration, see <reference name="Install Networking Services" refuri="https://docs.openstack.org/ocata/install-guide-ubuntu/neutron-controller-install.html">Install Networking
                            Services</reference>
                        in the Installation Tutorials and Guides. (The link defaults to the Ubuntu
                        version.)</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Restart the <literal>neutron-server</literal> to apply the settings:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service neutron-server restart</literal_block>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="configure-brocade-plug-in" names="configure\ brocade\ plug-in">
            <title>Configure Brocade plug-in</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Install the Brocade-modified Python netconf client (ncclient) library,
                        which is available at <reference refuri="https://github.com/brocade/ncclient">https://github.com/brocade/ncclient</reference>:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ git clone https://github.com/brocade/ncclient</literal_block>
                </list_item>
                <list_item>
                    <paragraph>As root, run this command:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># cd ncclient;python setup.py install</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/neutron.conf</literal> file and set the following
                        option:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">core_plugin = brocade</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/plugins/brocade/brocade.ini</literal> file for the
                        Brocade plug-in and specify the admin user name, password, and IP
                        address of the Brocade switch:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[SWITCH]
username = ADMIN
password = PASSWORD
address  = SWITCH_MGMT_IP_ADDRESS
ostype   = NOS</literal_block>
                    <paragraph>For database configuration, see <reference name="Install Networking Services" refuri="https://docs.openstack.org/ocata/install-guide-ubuntu/neutron-controller-install.html">Install Networking
                            Services</reference>
                        in any of the Installation Tutorials and Guides in the <reference name="OpenStack Documentation index" refuri="https://docs.openstack.org">OpenStack Documentation
                            index</reference>. (The link defaults to the Ubuntu
                        version.)</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Restart the <literal>neutron-server</literal> service to apply the settings:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service neutron-server restart</literal_block>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="configure-nsx-mh-plug-in" names="configure\ nsx-mh\ plug-in">
            <title>Configure NSX-mh plug-in</title>
            <paragraph>The instructions in this section refer to the VMware NSX-mh platform,
                formerly known as Nicira NVP.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Install the NSX plug-in:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># apt-get install python-vmware-nsx</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/neutron.conf</literal> file and set this line:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">core_plugin = vmware</literal_block>
                    <paragraph>Example <literal>neutron.conf</literal> file for NSX-mh integration:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">core_plugin = vmware
rabbit_host = 192.168.203.10
allow_overlapping_ips = True</literal_block>
                </list_item>
                <list_item>
                    <paragraph>To configure the NSX-mh controller cluster for OpenStack Networking,
                        locate the <literal>[default]</literal> section in the
                        <literal>/etc/neutron/plugins/vmware/nsx.ini</literal> file and add the following
                        entries:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>To establish and configure the connection with the controller cluster
                                you must set some parameters, including NSX-mh API endpoints, access
                                credentials, and optionally specify settings for HTTP timeouts,
                                redirects and retries in case of connection failures:</paragraph>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">nsx_user = ADMIN_USER_NAME
nsx_password = NSX_USER_PASSWORD
http_timeout = HTTP_REQUEST_TIMEOUT # (seconds) default 75 seconds
retries = HTTP_REQUEST_RETRIES # default 2
redirects = HTTP_REQUEST_MAX_REDIRECTS # default 2
nsx_controllers = API_ENDPOINT_LIST # comma-separated list</literal_block>
                            <paragraph>To ensure correct operations, the <literal>nsx_user</literal> user must have
                                administrator credentials on the NSX-mh platform.</paragraph>
                            <paragraph>A controller API endpoint consists of the IP address and port for the
                                controller; if you omit the port, port 443 is used. If multiple API
                                endpoints are specified, it is up to the user to ensure that all
                                these endpoints belong to the same controller cluster. The OpenStack
                                Networking VMware NSX-mh plug-in does not perform this check, and
                                results might be unpredictable.</paragraph>
                            <paragraph>When you specify multiple API endpoints, the plug-in takes care of
                                load balancing requests on the various API endpoints.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>The UUID of the NSX-mh transport zone that should be used by default
                                when a project creates a network. You can get this value from the
                                Transport Zones page for the NSX-mh manager:</paragraph>
                            <paragraph>Alternatively the transport zone identifier can be retrieved by query
                                the NSX-mh API: <literal>/ws.v1/transport-zone</literal></paragraph>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">default_tz_uuid = TRANSPORT_ZONE_UUID</literal_block>
                        </list_item>
                        <list_item>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">default_l3_gw_service_uuid = GATEWAY_SERVICE_UUID</literal_block>
                            <warning>
                                <paragraph>Ubuntu packaging currently does not update the neutron init
                                    script to point to the NSX-mh configuration file. Instead, you
                                    must manually update <literal>/etc/default/neutron-server</literal> to add this
                                    line:</paragraph>
                                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">NEUTRON_PLUGIN_CONFIG = /etc/neutron/plugins/vmware/nsx.ini</literal_block>
                            </warning>
                            <paragraph>For database configuration, see <reference name="Install Networking Services" refuri="https://docs.openstack.org/ocata/install-guide-ubuntu/neutron-controller-install.html">Install Networking
                                    Services</reference>
                                in the Installation Tutorials and Guides.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Restart <literal>neutron-server</literal> to apply settings:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service neutron-server restart</literal_block>
                    <warning>
                        <paragraph>The neutron NSX-mh plug-in does not implement initial
                            re-synchronization of Neutron resources. Therefore resources that
                            might already exist in the database when Neutron is switched to the
                            NSX-mh plug-in will not be created on the NSX-mh backend upon
                            restart.</paragraph>
                    </warning>
                </list_item>
            </enumerated_list>
            <paragraph>Example <literal>nsx.ini</literal> file:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[DEFAULT]
default_tz_uuid = d3afb164-b263-4aaa-a3e4-48e0e09bb33c
default_l3_gw_service_uuid=5c8622cc-240a-40a1-9693-e6a5fca4e3cf
nsx_user=admin
nsx_password=changeme
nsx_controllers=10.127.0.100,10.127.0.200:8888</literal_block>
            <note>
                <paragraph>To debug <literal classes="file" role="file">nsx.ini</literal> configuration issues, run this command from the
                    host that runs neutron-server:</paragraph>
            </note>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># neutron-check-nsx-config PATH_TO_NSX.INI</literal_block>
            <paragraph>This command tests whether <literal>neutron-server</literal> can log into all of the
                NSX-mh controllers and the SQL server, and whether all UUID values
                are correct.</paragraph>
        </section>
        <section ids="configure-plumgrid-plug-in" names="configure\ plumgrid\ plug-in">
            <title>Configure PLUMgrid plug-in</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/neutron.conf</literal> file and set this line:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">core_plugin = plumgrid</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Edit the [PLUMgridDirector] section in the
                        <literal>/etc/neutron/plugins/plumgrid/plumgrid.ini</literal> file and specify the IP
                        address, port, admin user name, and password of the PLUMgrid Director:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[PLUMgridDirector]
director_server = "PLUMgrid-director-ip-address"
director_server_port = "PLUMgrid-director-port"
username = "PLUMgrid-director-admin-username"
password = "PLUMgrid-director-admin-password"</literal_block>
                    <paragraph>For database configuration, see <reference name="Install Networking Services" refuri="https://docs.openstack.org/ocata/install-guide-ubuntu/neutron-controller-install.html">Install Networking
                            Services</reference>
                        in the Installation Tutorials and Guides.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Restart the <literal>neutron-server</literal> service to apply the settings:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service neutron-server restart</literal_block>
                </list_item>
            </enumerated_list>
        </section>
    </section>
</document>
