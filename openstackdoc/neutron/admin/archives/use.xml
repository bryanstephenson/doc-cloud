<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/admin/archives/use.rst">
    <section ids="use-networking" names="use\ networking">
        <title>Use Networking</title>
        <paragraph>You can manage OpenStack Networking services by using the service
            command. For example:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service neutron-server stop
# service neutron-server status
# service neutron-server start
# service neutron-server restart</literal_block>
        <paragraph>Log files are in the <literal>/var/log/neutron</literal> directory.</paragraph>
        <paragraph>Configuration files are in the <literal>/etc/neutron</literal> directory.</paragraph>
        <paragraph>Administrators and projects can use OpenStack Networking to build
            rich network topologies. Administrators can create network
            connectivity on behalf of projects.</paragraph>
        <section ids="core-networking-api-features" names="core\ networking\ api\ features">
            <title>Core Networking API features</title>
            <paragraph>After installing and configuring Networking (neutron), projects and
                administrators can perform create-read-update-delete (CRUD) API networking
                operations. This is performed using the Networking API directly with either
                the <literal_strong classes="command">neutron</literal_strong> command-line interface (CLI) or the <literal_strong classes="command">openstack</literal_strong>
                CLI. The <literal_strong classes="command">neutron</literal_strong> CLI is a wrapper around the Networking API. Every
                Networking API call has a corresponding <literal_strong classes="command">neutron</literal_strong> command.</paragraph>
            <paragraph>The <literal_strong classes="command">openstack</literal_strong> CLI is a common interface for all OpenStack
                projects, however, not every API operation has been implemented. For the
                list of available commands, see <reference name="Command List" refuri="https://docs.openstack.org/python-openstackclient/latest/cli/command-list.html">Command List</reference>.</paragraph>
            <paragraph>The <literal_strong classes="command">neutron</literal_strong> CLI includes a number of options. For details, see
                <reference name="Create and manage networks" refuri="https://docs.openstack.org/user-guide/cli-create-and-manage-networks.html">Create and manage networks</reference>.</paragraph>
            <section ids="basic-networking-operations" names="basic\ networking\ operations">
                <title>Basic Networking operations</title>
                <paragraph>To learn about advanced capabilities available through the <literal_strong classes="command">neutron</literal_strong>
                    command-line interface (CLI), read the networking section <reference name="Create and manage networks" refuri="https://docs.openstack.org/user-guide/cli-create-and-manage-networks.html">Create and manage
                        networks</reference>
                    in the OpenStack End User Guide.</paragraph>
                <paragraph>This table shows example <literal_strong classes="command">openstack</literal_strong> commands that enable you to
                    complete basic network operations:</paragraph>
                <table>
                    <tgroup cols="2">
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="49"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Operation</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Command</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>Creates a network.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack network create net1</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Creates a subnet that is
                                        associated with net1.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--subnet-range 10.0.0.0/24</literal>
                                        <literal>--network net1</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Lists ports for a
                                        specified project.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port list</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Lists ports for a
                                        specified project
                                        and displays the <literal>ID</literal>,
                                        <literal>Fixed IP Addresses</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port list -c ID</literal>
                                        <literal>-c "Fixed IP Addresses</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Shows information for a
                                        specified port.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port show PORT_ID</literal></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph><strong>Basic Networking operations</strong></paragraph>
                <note>
                    <paragraph>The <literal>device_owner</literal> field describes who owns the port. A port whose
                        <literal>device_owner</literal> begins with:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph><literal>network</literal> is created by Networking.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>compute</literal> is created by Compute.</paragraph>
                        </list_item>
                    </bullet_list>
                </note>
            </section>
            <section ids="administrative-operations" names="administrative\ operations">
                <title>Administrative operations</title>
                <paragraph>The administrator can run any <literal_strong classes="command">openstack</literal_strong> command on behalf of
                    projects by specifying an Identity <literal>project</literal> in the command, as
                    follows:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack network create --project PROJECT_ID NETWORK_NAME</literal_block>
                <paragraph>For example:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack network create --project 5e4bbe24b67a4410bc4d9fae29ec394e net1</literal_block>
                <note>
                    <paragraph>To view all project IDs in Identity, run the following command as an
                        Identity service admin user:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack project list</literal_block>
                </note>
            </section>
            <section ids="advanced-networking-operations" names="advanced\ networking\ operations">
                <title>Advanced Networking operations</title>
                <paragraph>This table shows example CLI commands that enable you to complete
                    advanced network operations:</paragraph>
                <table>
                    <tgroup cols="2">
                        <colspec colwidth="31"></colspec>
                        <colspec colwidth="44"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Operation</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Command</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>Creates a network that
                                        all projects can use.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack network create</literal>
                                        <literal>--share public-net</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Creates a subnet with a
                                        specified gateway IP address.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--gateway 10.0.0.254 --network net1</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Creates a subnet that has
                                        no gateway IP address.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--no-gateway --network net1</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Creates a subnet with DHCP
                                        disabled.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--network net1 --no-dhcp</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Specifies a set of host routes</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--network net1 --host-route</literal>
                                        <literal>destination=40.0.1.0/24,</literal>
                                        <literal>gateway=40.0.0.2</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Creates a subnet with a
                                        specified set of dns name
                                        servers.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack subnet create subnet1</literal>
                                        <literal>--network net1 --dns-nameserver</literal>
                                        <literal>8.8.4.4</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Displays all ports and
                                        IPs allocated on a network.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port list --network NET_ID</literal></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph><strong>Advanced Networking operations</strong></paragraph>
                <note>
                    <paragraph>During port creation and update, specific extra-dhcp-options can be left blank.
                        For example, <literal>router</literal> and <literal>classless-static-route</literal>. This causes dnsmasq
                        to have an empty option in the <literal>opts</literal> file related to the network.
                        For example:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">tag:tag0,option:classless-static-route,
tag:tag0,option:router,</literal_block>
                </note>
            </section>
        </section>
        <section ids="use-compute-with-networking" names="use\ compute\ with\ networking">
            <title>Use Compute with Networking</title>
            <section ids="basic-compute-and-networking-operations" names="basic\ compute\ and\ networking\ operations">
                <title>Basic Compute and Networking operations</title>
                <paragraph>This table shows example <literal_strong classes="command">openstack</literal_strong> commands that enable you to
                    complete basic VM networking operations:</paragraph>
                <table>
                    <tgroup cols="2">
                        <colspec colwidth="34"></colspec>
                        <colspec colwidth="41"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Action</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Command</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>Checks available networks.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack network list</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Boots a VM with a single NIC on
                                        a selected Networking network.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack server create --image</literal>
                                        <literal>IMAGE --flavor FLAVOR --nic</literal>
                                        <literal>net-id=NET_ID VM_NAME</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Searches for ports with a
                                        <literal>device_id</literal> that matches the
                                        Compute instance UUID. See :ref:
                                        <title_reference>Create and delete VMs</title_reference></paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port list --server VM_ID</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Searches for ports, but shows
                                        only the <literal>mac_address</literal> of
                                        the port.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port list -c</literal>
                                        <literal>"MAC Address" --server VM_ID</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Temporarily disables a port from
                                        sending traffic.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack port set PORT_ID</literal>
                                        <literal>--disable</literal></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph><strong>Basic Compute and Networking operations</strong></paragraph>
                <note>
                    <paragraph>The <literal>device_id</literal> can also be a logical router ID.</paragraph>
                </note>
                <note>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>When you boot a Compute VM, a port on the network that
                                corresponds to the VM NIC is automatically created and associated
                                with the default security group. You can configure <reference name="security group rules" refuri="#enable-ping-and-ssh-on-vms-security-groups">security
                                    group rules</reference> to enable
                                users to access the VM.</paragraph>
                        </list_item>
                    </bullet_list>
                </note>
                <target ids="create-and-delete-vms" names="create\ and\ delete\ vms" refuri="-WhenyoudeleteaComputeVM,theunderlyingNetworkingportisautomaticallydeleted."></target>
            </section>
            <section ids="advanced-vm-creation-operations" names="advanced\ vm\ creation\ operations">
                <title>Advanced VM creation operations</title>
                <paragraph>This table shows example <literal_strong classes="command">openstack</literal_strong> commands that enable you to
                    complete advanced VM creation operations:</paragraph>
                <table>
                    <tgroup cols="2">
                        <colspec colwidth="37"></colspec>
                        <colspec colwidth="38"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Operation</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Command</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>Boots a VM with multiple
                                        NICs.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack server create --image</literal>
                                        <literal>IMAGE --flavor FLAVOR --nic</literal>
                                        <literal>net-id=NET_ID VM_NAME</literal>
                                        <literal>net-id=NET2-ID VM_NAME</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Boots a VM with a specific IP
                                        address. Note that you cannot
                                        use the <literal>--max</literal> or <literal>--min</literal>
                                        parameters in this case.</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack server create --image</literal>
                                        <literal>IMAGE --flavor FLAVOR --nic</literal>
                                        <literal>net-id=NET_ID VM_NAME</literal>
                                        <literal>v4-fixed-ip=IP-ADDR VM_NAME</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>Boots a VM that connects to all
                                        networks that are accessible to the
                                        project who submits the request
                                        (without the <literal>--nic</literal> option).</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>$ openstack server create --image</literal>
                                        <literal>IMAGE --flavor FLAVOR</literal></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph><strong>Advanced VM creation operations</strong></paragraph>
                <note>
                    <paragraph>Cloud images that distribution vendors offer usually have only one
                        active NIC configured. When you boot with multiple NICs, you must
                        configure additional interfaces on the image or the NICs are not
                        reachable.</paragraph>
                    <paragraph>The following Debian/Ubuntu-based example shows how to set up the
                        interfaces within the instance in the <literal>/etc/network/interfaces</literal>
                        file. You must apply this configuration to the image.</paragraph>
                    <literal_block highlight_args="{}" language="bash" linenos="False" xml:space="preserve"># The loopback network interface
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp

auto eth1
iface eth1 inet dhcp</literal_block>
                </note>
            </section>
            <section ids="enable-ping-and-ssh-on-vms-security-groups" names="enable\ ping\ and\ ssh\ on\ vms\ (security\ groups)">
                <title>Enable ping and SSH on VMs (security groups)</title>
                <paragraph>You must configure security group rules depending on the type of plug-in
                    you are using. If you are using a plug-in that:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>Implements Networking security groups, you can configure security
                            group rules directly by using the <literal_strong classes="command">openstack security group rule create</literal_strong>
                            command. This example enables <literal>ping</literal> and <literal>ssh</literal> access to your VMs.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack security group rule create --protocol icmp \
  --ingress SECURITY_GROUP</literal_block>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack security group rule create --protocol tcp \
  --egress --description "Sample Security Group" SECURITY_GROUP</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Does not implement Networking security groups, you can configure
                            security group rules by using the <literal_strong classes="command">openstack security group rule
                                create</literal_strong> or <literal_strong classes="command">euca-authorize</literal_strong> command. These <literal_strong classes="command">openstack</literal_strong>
                            commands enable <literal>ping</literal> and <literal>ssh</literal> access to your VMs.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack security group rule create --protocol icmp default
$ openstack security group rule create --protocol tcp --dst-port 22:22 default</literal_block>
                    </list_item>
                </bullet_list>
                <note>
                    <paragraph>If your plug-in implements Networking security groups, you can also
                        leverage Compute security groups by setting
                        <literal>security_group_api = neutron</literal> in the <literal>nova.conf</literal> file. After
                        you set this option, all Compute security group commands are proxied
                        to Networking.</paragraph>
                </note>
            </section>
        </section>
    </section>
</document>
