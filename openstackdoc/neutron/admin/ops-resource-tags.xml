<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/admin/ops-resource-tags.rst">
    <target refid="ops-resource-tags"></target>
    <section ids="resource-tags ops-resource-tags" names="resource\ tags ops-resource-tags">
        <title>Resource tags</title>
        <paragraph>Various virtual networking resources support tags for use by external
            systems or any other clients of the Networking service API.</paragraph>
        <paragraph>The currently supported resources are:</paragraph>
        <bullet_list bullet="*">
            <list_item>
                <paragraph>networks</paragraph>
            </list_item>
            <list_item>
                <paragraph>subnets</paragraph>
            </list_item>
            <list_item>
                <paragraph>subnetpools</paragraph>
            </list_item>
            <list_item>
                <paragraph>ports</paragraph>
            </list_item>
            <list_item>
                <paragraph>routers</paragraph>
            </list_item>
        </bullet_list>
        <section ids="use-cases" names="use\ cases">
            <title>Use cases</title>
            <paragraph>The following use cases refer to adding tags to networks, but the same
                can be applicable to any other supported Networking service resource:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Ability to map different networks in different OpenStack locations
                        to one logically same network (for multi-site OpenStack).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Ability to map IDs from different management/orchestration systems to
                        OpenStack networks in mixed environments. For example, in the Kuryr project,
                        the Docker network ID is mapped to the Neutron network ID.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Ability to leverage tags by deployment tools.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Ability to tag information about provider networks
                        (for example, high-bandwidth, low-latency, and so on).</paragraph>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="filtering-with-tags" names="filtering\ with\ tags">
            <title>Filtering with tags</title>
            <paragraph>The API allows searching/filtering of the <literal>GET /v2.0/networks</literal> API. The
                following query parameters are supported:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><literal>tags</literal></paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>tags-any</literal></paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>not-tags</literal></paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>not-tags-any</literal></paragraph>
                </list_item>
            </bullet_list>
            <paragraph>To request the list of networks that have a single tag, <literal>tags</literal> argument
                should be set to the desired tag name. Example:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?tags=red</literal_block>
            <paragraph>To request the list of networks that have two or more tags, the <literal>tags</literal>
                argument should be set to the list of tags, separated by commas. In this case,
                the tags given must all be present for a network to be included in the query
                result. Example that returns networks that have the “red” and “blue” tags:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?tags=red,blue</literal_block>
            <paragraph>To request the list of networks that have one or more of a list of given tags,
                the <literal>tags-any</literal> argument should be set to the list of tags, separated by
                commas. In this case, as long as one of the given tags is present, the network
                will be included in the query result. Example that returns the networks that
                have the “red” or the “blue” tag:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?tags-any=red,blue</literal_block>
            <paragraph>To request the list of networks that do not have one or more tags, the
                <literal>not-tags</literal> argument should be set to the list of tags, separated by commas.
                In this case, only the networks that do not have any of the given tags will be
                included in the query results. Example that returns the networks that do not
                have either “red” or “blue” tag:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?not-tags=red,blue</literal_block>
            <paragraph>To request the list of networks that do not have at least one of a list of
                tags, the <literal>not-tags-any</literal> argument should be set to the list of tags,
                separated by commas. In this case, only the networks that do not have at least
                one of the given tags will be included in the query result. Example that
                returns the networks that do not have the “red” tag, or do not have the “blue”
                tag:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?not-tags-any=red,blue</literal_block>
            <paragraph>The <literal>tags</literal>, <literal>tags-any</literal>, <literal>not-tags</literal>, and <literal>not-tags-any</literal> arguments can be
                combined to build more complex queries. Example:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?tags=red,blue&amp;tags-any=green,orange</literal_block>
            <paragraph>The above example returns any networks that have the “red” and “blue” tags,
                plus at least one of “green” and “orange”.</paragraph>
            <paragraph>Complex queries may have contradictory parameters. Example:</paragraph>
            <literal_block xml:space="preserve">GET /v2.0/networks?tags=blue&amp;not-tags=blue</literal_block>
            <paragraph>In this case, we should let the Networking service find these
                networks. Obviously, there are no such networks and the service will return an
                empty list.</paragraph>
        </section>
        <section ids="user-workflow" names="user\ workflow">
            <title>User workflow</title>
            <paragraph>Add a tag to a resource:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron tag-add --resource-type network --resource ab442634-1cc9-49e5-bd49-0dac9c811f69 --tag red
$ neutron net-show net
+-------------------------+--------------------------------------+
| Field                   | Value                                |
+-------------------------+--------------------------------------+
| admin_state_up          | True                                 |
| availability_zone_hints |                                      |
| availability_zones      |                                      |
| id                      | ab442634-1cc9-49e5-bd49-0dac9c811f69 |
| ipv4_address_scope      |                                      |
| ipv6_address_scope      |                                      |
| mtu                     | 1450                                 |
| name                    | net                                  |
| port_security_enabled   | True                                 |
| router:external         | False                                |
| shared                  | False                                |
| status                  | ACTIVE                               |
| subnets                 |                                      |
| tags                    | red                                  |
| tenant_id               | e6710680bfd14555891f265644e1dd5c     |
+-------------------------+--------------------------------------+</literal_block>
            <paragraph>Remove a tag from a resource:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron tag-remove --resource-type network --resource ab442634-1cc9-49e5-bd49-0dac9c811f69 --tag red
$ neutron net-show net
+-------------------------+--------------------------------------+
| Field                   | Value                                |
+-------------------------+--------------------------------------+
| admin_state_up          | True                                 |
| availability_zone_hints |                                      |
| availability_zones      |                                      |
| id                      | ab442634-1cc9-49e5-bd49-0dac9c811f69 |
| ipv4_address_scope      |                                      |
| ipv6_address_scope      |                                      |
| mtu                     | 1450                                 |
| name                    | net                                  |
| port_security_enabled   | True                                 |
| router:external         | False                                |
| shared                  | False                                |
| status                  | ACTIVE                               |
| subnets                 |                                      |
| tags                    |                                      |
| tenant_id               | e6710680bfd14555891f265644e1dd5c     |
+-------------------------+--------------------------------------+</literal_block>
            <paragraph>Replace all tags on the resource:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron tag-replace --resource-type network --resource ab442634-1cc9-49e5-bd49-0dac9c811f69 --tag red --tag blue
$ neutron net-show net
+-------------------------+--------------------------------------+
| Field                   | Value                                |
+-------------------------+--------------------------------------+
| admin_state_up          | True                                 |
| availability_zone_hints |                                      |
| availability_zones      |                                      |
| id                      | ab442634-1cc9-49e5-bd49-0dac9c811f69 |
| ipv4_address_scope      |                                      |
| ipv6_address_scope      |                                      |
| mtu                     | 1450                                 |
| name                    | net                                  |
| port_security_enabled   | True                                 |
| router:external         | False                                |
| shared                  | False                                |
| status                  | ACTIVE                               |
| subnets                 |                                      |
| tags                    | red                                  |
|                         | blue                                 |
| tenant_id               | e6710680bfd14555891f265644e1dd5c     |
+-------------------------+--------------------------------------+</literal_block>
            <paragraph>Clear tags from a resource:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron tag-remove --resource-type network --resource ab442634-1cc9-49e5-bd49-0dac9c811f69 --all
$ neutron net-show net
+-------------------------+--------------------------------------+
| Field                   | Value                                |
+-------------------------+--------------------------------------+
| admin_state_up          | True                                 |
| availability_zone_hints |                                      |
| availability_zones      |                                      |
| id                      | ab442634-1cc9-49e5-bd49-0dac9c811f69 |
| ipv4_address_scope      |                                      |
| ipv6_address_scope      |                                      |
| mtu                     | 1450                                 |
| name                    | net                                  |
| port_security_enabled   | True                                 |
| router:external         | False                                |
| shared                  | False                                |
| status                  | ACTIVE                               |
| subnets                 |                                      |
| tags                    |                                      |
| tenant_id               | e6710680bfd14555891f265644e1dd5c     |
+-------------------------+--------------------------------------+</literal_block>
            <paragraph>Get list of resources with tag filters from networks. The networks are:
                test-net1 with “red” tag, test-net2 with “red” and “blue” tags, test-net3 with
                “red”, “blue”, and “green” tags, and test-net4 with “green” tag.</paragraph>
            <paragraph>Get list of resources with <literal>tags</literal> filter:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron net-list --tags red,blue
+--------------------------------------+-----------+---------+
| id                                   | name      | subnets |
+--------------------------------------+-----------+---------+
| 8ca3b9ed-f578-45fa-8c44-c53f13aec05a | test-net3 |         |
| e736e63d-42e4-4f4c-836c-6ad286ffd68a | test-net2 |         |
+--------------------------------------+-----------+---------+</literal_block>
            <paragraph>Get list of resources with <literal>tags-any</literal> filter:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron net-list --tags-any red,blue
+--------------------------------------+-----------+---------+
| id                                   | name      | subnets |
+--------------------------------------+-----------+---------+
| 30491224-3855-431f-a688-fb29df004d82 | test-net1 |         |
| 8ca3b9ed-f578-45fa-8c44-c53f13aec05a | test-net3 |         |
| e736e63d-42e4-4f4c-836c-6ad286ffd68a | test-net2 |         |
+--------------------------------------+-----------+---------+</literal_block>
            <paragraph>Get list of resources with <literal>not-tags</literal> filter:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron net-list --not-tags red,blue
+--------------------------------------+-----------+---------+
| id                                   | name      | subnets |
+--------------------------------------+-----------+---------+
| 30491224-3855-431f-a688-fb29df004d82 | test-net1 |         |
| cdb3ed08-ca63-4090-ba12-30b366372993 | test-net4 |         |
+--------------------------------------+-----------+---------+</literal_block>
            <paragraph>Get list of resources with <literal>not-tags-any</literal> filter:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron net-list --not-tags-any red,blue
+--------------------------------------+-----------+---------+
| id                                   | name      | subnets |
+--------------------------------------+-----------+---------+
| cdb3ed08-ca63-4090-ba12-30b366372993 | test-net4 |         |
+--------------------------------------+-----------+---------+</literal_block>
        </section>
        <section ids="limitations" names="limitations">
            <title>Limitations</title>
            <paragraph>Filtering resources with a tag whose name contains a comma is not
                supported. Thus, do not put such a tag name to resources.</paragraph>
        </section>
        <section ids="future-support" names="future\ support">
            <title>Future support</title>
            <paragraph>In future releases, the Networking service may support setting tags for
                additional resources.</paragraph>
        </section>
    </section>
</document>
