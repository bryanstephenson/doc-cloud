<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/contributor/policies/release-checklist.rst">
    <section ids="pre-release-check-list" names="pre-release\ check\ list">
        <title>Pre-release check list</title>
        <paragraph>This page lists things to cover before a Neutron release and will serve as a
            guide for next release managers.</paragraph>
        <section ids="server" names="server">
            <title>Server</title>
            <section ids="major-release" names="major\ release">
                <title>Major release</title>
                <paragraph>Major release is cut off once per development cycle and has an assigned name
                    (Liberty, Mitaka, …)</paragraph>
                <paragraph>Prior to major release,</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>consider blocking all patches that are not targeted for the new release;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>consider blocking trivial patches to keep the gate clean;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>revise the current list of blueprints and bugs targeted for the release;
                            roll over anything that does not fit there, or won’t make it (note that no
                            new features land master after so called feature freeze is claimed by
                            release team; there is a feature freeze exception (FFE) process described in
                            release engineering documentation in more details:
                            <reference refuri="http://docs.openstack.org/project-team-guide/release-management.html">http://docs.openstack.org/project-team-guide/release-management.html</reference>);</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>start collecting state for targeted features from the team. For example,
                            propose a postmortem patch for neutron-specs as in:
                            <reference refuri="https://review.openstack.org/#/c/286413/">https://review.openstack.org/#/c/286413/</reference></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>revise deprecation warnings collected in latest Jenkins runs: some of them
                            may indicate a problem that should be fixed prior to release (see
                            deprecations.txt file in those log directories); also, check whether any
                            Launchpad bugs with the ‘deprecation’ tag need a clean-up or a follow-up in
                            the context of the release planned;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>check that release notes and sample configuration files render correctly,
                            arrange clean-up if needed.</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>New major release process contains several phases:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>master branch is blocked for patches that are not targeted for the release;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>the whole team is expected to work on closing remaining pieces targeted for
                            the release;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>once the team is ready to release the first release candidate (RC1), either
                            PTL or one of release liaisons proposes a patch for openstack/releases repo.
                            For example, see: <reference refuri="https://review.openstack.org/#/c/292445/">https://review.openstack.org/#/c/292445/</reference></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>once the openstack/releases patch land, release team creates a new stable
                            branch using hash values specified in the patch;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>at this point, master branch is open for patches targeted to the next
                            release; PTL unblocks all patches that were blocked in step 1;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>if additional patches are identified that are critical for the release and
                            must be shipped in the final major build, corresponding bugs are tagged
                            with &lt;release&gt;-rc-potential in Launchpad, fixes are prepared and land in
                            master branch, and are then backported to the newly created stable branch;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>if patches landed in the release stable branch as per the previous step, a
                            new release candidate that would include those patches should be requested
                            by PTL in openstack/releases repo.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>eventually, the latest release candidate requested by PTL becomes the final
                            major release of the project.</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>Release candidate (RC) process allows for stabilization of the final release.</paragraph>
                <paragraph>The following technical steps should be taken before the final release is cut
                    off:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>the latest alembic scripts are tagged with a milestone label. For example,
                            see: <reference refuri="https://review.openstack.org/#/c/288212/">https://review.openstack.org/#/c/288212/</reference></paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>In the new stable branch, you should make sure that:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>.gitreview file points to the new branch;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>if the branch uses constraints to manage gated dependency versions, the
                            default constraints file name points to corresponding stable branch in
                            openstack/requirements repo;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>if the branch fetches any other projects as dependencies, f.e. by using
                            tox_install.sh as an install_command in tox.ini, git repository links point
                            to corresponding stable branches of those dependency projects.</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>Note that some of those steps may be covered by OpenStack release team.</paragraph>
                <paragraph>In the opened master branch, you should:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>update CURRENT_RELEASE in neutron.db.migration.cli to point to the next
                            release name.</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>While preparing the next release and even in the middle of development, it’s
                    worth keeping the infrastructure clean. Consider using those tools to declutter
                    the project infrastructure:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>declutter Gerrit:</paragraph>
                        <literal_block xml:space="preserve">&lt;neutron&gt;/tools/abandon_old_reviews.sh</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>declutter Launchpad:</paragraph>
                        <literal_block xml:space="preserve">&lt;release-tools&gt;/pre_expire_bugs.py neutron --day &lt;back-to-the-beginning-of-the-release&gt;</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="minor-release" names="minor\ release">
                <title>Minor release</title>
                <paragraph>Minor release is a release created from existing stable branch after the
                    initial major release, and that usually contains bug fixes and small
                    improvements only.</paragraph>
                <paragraph>The following steps should be taken before claiming a successful minor release:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>a patch for openstack/releases repo is proposed and merged.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
        </section>
        <section ids="client" names="client">
            <title>Client</title>
            <paragraph>Most tips from the Server section apply to client releases too. Several things
                to note though:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>when preparing for a major release, pay special attention to client bits
                        that are targeted for the release. Global openstack/requirements freeze
                        happens long before first RC release of server components. So if you plan to
                        land server patches that depend on a new client, make sure you don’t miss
                        the requirements freeze. After the freeze is in action, there is no easy way
                        to land more client patches for the planned target. All this may push an
                        affected feature to the next development cycle.</paragraph>
                </list_item>
            </enumerated_list>
        </section>
    </section>
</document>
