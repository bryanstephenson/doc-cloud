<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/contributor/testing/coverage.rst">
    <comment xml:space="preserve">Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.


Convention for heading levels in Neutron devref:
=======  Heading 0 (reserved for the title in a document)
-------  Heading 1
~~~~~~~  Heading 2
+++++++  Heading 3
'''''''  Heading 4
(Avoid deeper levels because they do not render well.)</comment>
    <section ids="test-coverage" names="test\ coverage">
        <title>Test Coverage</title>
        <paragraph>The intention is to track merged features or areas of code that lack certain
            types of tests. This document may be used both by developers that want to
            contribute tests, and operators that are considering adopting a feature.</paragraph>
        <section ids="coverage" names="coverage">
            <title>Coverage</title>
            <paragraph>Note that while both API and scenario tests target a deployed OpenStack cloud,
                API tests are under the Neutron tree and scenario tests are under the Tempest
                tree.</paragraph>
            <paragraph>It is the expectation that API changes involve API tests, agent features
                or modifications involve functional tests, and Neutron-wide features involve
                fullstack or scenario tests as appropriate.</paragraph>
            <paragraph>The table references tests that explicitly target a feature, and not a job
                that is configured to run against a specific backend (Thereby testing it
                implicitly). So, for example, while the Linux bridge agent has a job that runs
                the API and scenario tests with the Linux bridge agent configured, it does not
                have functional tests that target the agent explicitly. The ‘gate’ column
                is about running API/scenario tests with Neutron configured in a certain way,
                such as what L2 agent to use or what type of routers to create.</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>V            - Merged</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Blank        - Not applicable</paragraph>
                </list_item>
                <list_item>
                    <paragraph>X            - Absent or lacking</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Patch number - Currently in review</paragraph>
                </list_item>
                <list_item>
                    <paragraph>A name       - That person has committed to work on an item</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Implicit     - The code is executed, yet no assertions are made</paragraph>
                </list_item>
            </bullet_list>
            <table>
                <tgroup cols="7">
                    <colspec colwidth="24"></colspec>
                    <colspec colwidth="12"></colspec>
                    <colspec colwidth="12"></colspec>
                    <colspec colwidth="12"></colspec>
                    <colspec colwidth="12"></colspec>
                    <colspec colwidth="12"></colspec>
                    <colspec colwidth="12"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Area</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Unit</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Functional</paragraph>
                            </entry>
                            <entry>
                                <paragraph>API</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Fullstack</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Scenario</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Gate</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>DVR</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>L3-V OVS-X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>L3 HA</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>286087</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>L2pop</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>Implicit</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>DHCP HA</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>amuller</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>OVS ARP responder</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X*</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>Implicit</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>OVS agent</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Linux Bridge agent</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Metering</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>DHCP agent</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>amuller</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>rpc_workers</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Reference ipam driver</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>MTU advertisement</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>VLAN transparency</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Prefix delegation</paragraph>
                            </entry>
                            <entry>
                                <paragraph>V</paragraph>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                                <paragraph>X</paragraph>
                            </entry>
                            <entry>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Prefix delegation doesn’t have functional tests for the dibbler and pd
                        layers, nor for the L3 agent changes. This has been an area of repeated
                        regressions.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The functional job now compiles OVS 2.5 from source, enabling testing
                        features that we previously could not.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="missing-infrastructure" names="missing\ infrastructure">
            <title>Missing Infrastructure</title>
            <paragraph>The following section details missing test <emphasis>types</emphasis>. If you want to pick up
                an action item, please contact amuller for more context and guidance.</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>The Neutron team would like Rally to persist results over a window of time,
                        graph and visualize this data, so that reviewers could compare average runs
                        against a proposed patch.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>It’s possible to test RPC methods via the unit tests infrastructure. This was
                        proposed in patch 162811. The goal is provide developers a light weight
                        way to rapidly run tests that target the RPC layer, so that a patch that
                        modifies an RPC method’s signature could be verified quickly and locally.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Neutron currently runs a ‘partial-grenade’ job that verifies that an OVS
                        version from the latest stable release works with neutron-server from master.
                        We would like to expand this to DHCP and L3 agents as well.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>
