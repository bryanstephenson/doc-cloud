<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/contributor/internals/api_layer.rst">
    <comment xml:space="preserve">Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.


Convention for heading levels in Neutron devref:
=======  Heading 0 (reserved for the title in a document)
-------  Heading 1
~~~~~~~  Heading 2
+++++++  Heading 3
'''''''  Heading 4
(Avoid deeper levels because they do not render well.)</comment>
    <section ids="neutron-wsgi-http-api-layer" names="neutron\ wsgi/http\ api\ layer">
        <title>Neutron WSGI/HTTP API layer</title>
        <paragraph>This section will cover the internals of Neutron’s HTTP API, and the classes
            in Neutron that can be used to create Extensions to the Neutron API.</paragraph>
        <paragraph>Python web applications interface with webservers through the Python Web
            Server Gateway Interface (WSGI) - defined in <reference name="PEP 333" refuri="http://legacy.python.org/dev/peps/pep-0333/">PEP 333</reference><target ids="pep-333" names="pep\ 333" refuri="http://legacy.python.org/dev/peps/pep-0333/"></target></paragraph>
        <section ids="startup" names="startup">
            <title>Startup</title>
            <paragraph>Neutron’s WSGI server is started from the <reference name="server module" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/server/__init__.py">server module</reference><target ids="server-module" names="server\ module" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/server/__init__.py"></target>
                and the entry point <title_reference>serve_wsgi</title_reference> is called to build an instance of the
                <reference name="NeutronApiService" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/service.py">NeutronApiService</reference>, which is then returned to the server module,
                which spawns a <reference name="Eventlet" refuri="http://eventlet.net/">Eventlet</reference> <reference name="GreenPool" refuri="http://eventlet.net/doc/modules/greenpool.html">GreenPool</reference> that will run the WSGI
                application and respond to requests from clients.</paragraph>
            <target ids="neutronapiservice" names="neutronapiservice" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/service.py"></target>
            <target ids="eventlet" names="eventlet" refuri="http://eventlet.net/"></target>
            <target ids="greenpool" names="greenpool" refuri="http://eventlet.net/doc/modules/greenpool.html"></target>
        </section>
        <section ids="wsgi-application" names="wsgi\ application">
            <title>WSGI Application</title>
            <paragraph>During the building of the NeutronApiService, the <title_reference>_run_wsgi</title_reference> function
                creates a WSGI application using the <title_reference>load_paste_app</title_reference> function inside
                <reference name="config.py" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/common/config.py">config.py</reference> - which parses <reference name="api-paste.ini" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/etc/api-paste.ini">api-paste.ini</reference> - in order to create a WSGI app
                using <reference name="Paste" refuri="http://pythonpaste.org/">Paste</reference>’s <reference name="deploy" refuri="http://pythonpaste.org/deploy/">deploy</reference>.</paragraph>
            <paragraph>The api-paste.ini file defines the WSGI applications and routes - using the
                <reference name="Paste INI file format" refuri="http://pythonpaste.org/deploy/#applications">Paste INI file format</reference>.</paragraph>
            <paragraph>The INI file directs paste to instantiate the <reference name="APIRouter" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/api/v2/router.py">APIRouter</reference> class of
                Neutron, which contains several methods that map Neutron resources (such as
                Ports, Networks, Subnets) to URLs, and the controller for each resource.</paragraph>
            <target ids="config-py" names="config.py" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/common/config.py"></target>
            <target ids="api-paste-ini" names="api-paste.ini" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/etc/api-paste.ini"></target>
            <target ids="apirouter" names="apirouter" refuri="http://git.openstack.org/cgit/openstack/neutron/tree/neutron/api/v2/router.py"></target>
            <target ids="paste" names="paste" refuri="http://pythonpaste.org/"></target>
            <target ids="deploy" names="deploy" refuri="http://pythonpaste.org/deploy/"></target>
            <target ids="paste-ini-file-format" names="paste\ ini\ file\ format" refuri="http://pythonpaste.org/deploy/#applications"></target>
        </section>
        <section ids="further-reading" names="further\ reading">
            <title>Further reading</title>
            <paragraph><reference name="Yong Sheng Gong: Deep Dive into Neutron" refuri="http://www.slideshare.net/gongys2004/inside-neutron-2">Yong Sheng Gong: Deep Dive into Neutron</reference><target ids="yong-sheng-gong-deep-dive-into-neutron" names="yong\ sheng\ gong:\ deep\ dive\ into\ neutron" refuri="http://www.slideshare.net/gongys2004/inside-neutron-2"></target></paragraph>
        </section>
    </section>
</document>
