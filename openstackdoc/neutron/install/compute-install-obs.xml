<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/neutron/doc/source/install/compute-install-obs.rst">
    <section ids="install-and-configure-compute-node" names="install\ and\ configure\ compute\ node">
        <title>Install and configure compute node</title>
        <paragraph>The compute node handles connectivity and security groups for instances.</paragraph>
        <section ids="install-the-components" names="install\ the\ components">
            <title>Install the components</title>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># zypper install --no-recommends \
  openstack-neutron-linuxbridge-agent bridge-utils</literal_block>
            <comment xml:space="preserve">end</comment>
        </section>
        <section ids="configure-the-common-component" names="configure\ the\ common\ component">
            <title>Configure the common component</title>
            <paragraph>The Networking common component configuration includes the
                authentication mechanism, message queue, and plug-in.</paragraph>
            <note>
                <paragraph>Default configuration files vary by distribution. You might need
                    to add these sections and options rather than modifying existing
                    sections and options. Also, an ellipsis (<literal>...</literal>) in the configuration
                    snippets indicates potential default configuration options that you
                    should retain.</paragraph>
            </note>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Edit the <literal>/etc/neutron/neutron.conf</literal> file and complete the following
                        actions:</paragraph>
                    <bullet_list bullet="*">
                        <list_item>
                            <paragraph>In the <literal>[database]</literal> section, comment out any <literal>connection</literal> options
                                because compute nodes do not directly access the database.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>In the <literal>[DEFAULT]</literal> section, configure <literal>RabbitMQ</literal>
                                message queue access:</paragraph>
                            <comment xml:space="preserve">path /etc/neutron/neutron.conf</comment>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[DEFAULT]
# ...
transport_url = rabbit://openstack:RABBIT_PASS@controller</literal_block>
                            <comment xml:space="preserve">end</comment>
                            <paragraph>Replace <literal>RABBIT_PASS</literal> with the password you chose for the <literal>openstack</literal>
                                account in RabbitMQ.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>In the <literal>[DEFAULT]</literal> and <literal>[keystone_authtoken]</literal> sections, configure
                                Identity service access:</paragraph>
                            <comment xml:space="preserve">path /etc/neutron/neutron.conf</comment>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[DEFAULT]
# ...
auth_strategy = keystone

[keystone_authtoken]
# ...
auth_uri = http://controller:5000
auth_url = http://controller:35357
memcached_servers = controller:11211
auth_type = password
project_domain_name = default
user_domain_name = default
project_name = service
username = neutron
password = NEUTRON_PASS</literal_block>
                            <comment xml:space="preserve">end</comment>
                            <paragraph>Replace <literal>NEUTRON_PASS</literal> with the password you chose for the <literal>neutron</literal>
                                user in the Identity service.</paragraph>
                            <note>
                                <paragraph>Comment out or remove any other options in the
                                    <literal>[keystone_authtoken]</literal> section.</paragraph>
                            </note>
                        </list_item>
                    </bullet_list>
                </list_item>
            </bullet_list>
        </section>
        <section ids="configure-networking-options" names="configure\ networking\ options">
            <title>Configure networking options</title>
            <paragraph>Choose the same networking option that you chose for the controller node to
                configure services specific to it. Afterwards, return here and proceed to
                <reference internal="True" refid="neutron-compute-compute-obs"><inline classes="std std-ref">Configure the Compute service to use the Networking service</inline></reference>.</paragraph>
            <compound classes="toctree-wrapper">
                <compact_paragraph toctree="True"><bullet_list><list_item classes="toctree-l1"><compact_paragraph classes="toctree-l1"><reference anchorname="" internal="True" refuri="compute-install-option1-obs">Networking Option 1: Provider networks</reference></compact_paragraph></list_item><list_item classes="toctree-l1"><compact_paragraph classes="toctree-l1"><reference anchorname="" internal="True" refuri="compute-install-option2-obs">Networking Option 2: Self-service networks</reference></compact_paragraph></list_item></bullet_list></compact_paragraph>
            </compound>
            <target refid="neutron-compute-compute-obs"></target>
        </section>
        <section ids="configure-the-compute-service-to-use-the-networking-service neutron-compute-compute-obs" names="configure\ the\ compute\ service\ to\ use\ the\ networking\ service neutron-compute-compute-obs">
            <title>Configure the Compute service to use the Networking service</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Edit the <literal>/etc/nova/nova.conf</literal> file and complete the following actions:</paragraph>
                    <bullet_list bullet="*">
                        <list_item>
                            <paragraph>In the <literal>[neutron]</literal> section, configure access parameters:</paragraph>
                            <comment xml:space="preserve">path /etc/nova/nova.conf</comment>
                            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[neutron]
# ...
url = http://controller:9696
auth_url = http://controller:35357
auth_type = password
project_domain_name = default
user_domain_name = default
region_name = RegionOne
project_name = service
username = neutron
password = NEUTRON_PASS</literal_block>
                            <comment xml:space="preserve">end</comment>
                            <paragraph>Replace <literal>NEUTRON_PASS</literal> with the password you chose for the <literal>neutron</literal>
                                user in the Identity service.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
            </bullet_list>
        </section>
        <section ids="finalize-installation" names="finalize\ installation">
            <title>Finalize installation</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>The Networking service initialization scripts expect the variable
                        <literal>NEUTRON_PLUGIN_CONF</literal> in the <literal>/etc/sysconfig/neutron</literal> file to
                        reference the ML2 plug-in configuration file. Ensure that the
                        <literal>/etc/sysconfig/neutron</literal> file contains the following:</paragraph>
                    <comment xml:space="preserve">path /etc/sysconfig/neutron</comment>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">NEUTRON_PLUGIN_CONF="/etc/neutron/plugins/ml2/ml2_conf.ini"</literal_block>
                    <comment xml:space="preserve">end</comment>
                </list_item>
                <list_item>
                    <paragraph>Restart the Compute service:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># systemctl restart openstack-nova-compute.service</literal_block>
                    <comment xml:space="preserve">end</comment>
                </list_item>
                <list_item>
                    <paragraph>Start the Linux Bridge agent and configure it to start when the
                        system boots:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># systemctl enable openstack-neutron-linuxbridge-agent.service
# systemctl start openstack-neutron-linuxbridge-agent.service</literal_block>
                    <comment xml:space="preserve">end</comment>
                </list_item>
            </enumerated_list>
        </section>
    </section>
</document>
