<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Install and configure for openSUSE and SUSE Linux Enterprise</title>
  <para>This section describes how to install and configure the dashboard
            on the controller node.</para>
  <para>The only core service required by the dashboard is the Identity service.
            You can use the dashboard in combination with other services, such as
            Image service, Compute, and Networking. You can also use the dashboard
            in environments with stand-alone services such as Object Storage.</para>
  <note>
    <para>This section assumes proper installation, configuration, and operation
                of the Identity service using the Apache HTTP server and Memcached
                service.</para>
  </note>
  <section>
    <title>Install and configure components</title>
    <note>
      <para>Default configuration files vary by distribution. You might need
                    to add these sections and options rather than modifying existing
                    sections and options. Also, an ellipsis (<literal>...</literal>) in the configuration
                    snippets indicates potential default configuration options that you
                    should retain.</para>
    </note>
    <procedure>
      <step>
        <para>Install the packages:</para>
        <screen language="console"># zypper install openstack-dashboard</screen>
      </step>
      <step>
        <para>Configure the web server:</para>
        <screen language="console"># cp /etc/apache2/conf.d/openstack-dashboard.conf.sample \
  /etc/apache2/conf.d/openstack-dashboard.conf
# a2enmod rewrite</screen>
      </step>
      <step>
        <para>Edit the
                        <literal>/srv/www/openstack-dashboard/openstack_dashboard/local/local_settings.py</literal>
                        file and complete the following actions:</para>
        <itemizedlist>
          <listitem>
            <para>Configure the dashboard to use OpenStack services on the
                                <literal>controller</literal> node:</para>
            <screen language="python">OPENSTACK_HOST = "controller"</screen>
          </listitem>
          <listitem>
            <para>Allow your hosts to access the dashboard:</para>
            <screen language="python">ALLOWED_HOSTS = ['one.example.com', 'two.example.com']</screen>
            <note>
              <para><literal>ALLOWED_HOSTS</literal> can also be <literal>['*']</literal> to accept all hosts. This may be
                                    useful for development work, but is potentially insecure and should
                                    not be used in production. See <link xlink:href="https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hosts">Django documentation</link>
                                    for further information.</para>
            </note>
          </listitem>
          <listitem>
            <para>Configure the <literal>memcached</literal> session storage service:</para>
            <screen language="python">SESSION_ENGINE = 'django.contrib.sessions.backends.cache'

CACHES = {
    'default': {
         'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
         'LOCATION': 'controller:11211',
    }
}</screen>
            <note>
              <para>Comment out any other session storage configuration.</para>
            </note>
          </listitem>
          <listitem>
            <para>Enable the Identity API version 3:</para>
            <screen language="python">OPENSTACK_KEYSTONE_URL = "http://%s:5000/v3" % OPENSTACK_HOST</screen>
          </listitem>
          <listitem>
            <para>Enable support for domains:</para>
            <screen language="python">OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True</screen>
          </listitem>
          <listitem>
            <para>Configure API versions:</para>
            <screen language="python">OPENSTACK_API_VERSIONS = {
    "identity": 3,
    "image": 2,
    "volume": 2,
}</screen>
          </listitem>
          <listitem>
            <para>Configure <literal>Default</literal> as the default domain for users that you create
                                via the dashboard:</para>
            <screen language="python">OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = "Default"</screen>
          </listitem>
          <listitem>
            <para>Configure <literal>user</literal> as the default role for
                                users that you create via the dashboard:</para>
            <screen language="python">OPENSTACK_KEYSTONE_DEFAULT_ROLE = "user"</screen>
          </listitem>
          <listitem>
            <para>If you chose networking option 1, disable support for layer-3
                                networking services:</para>
            <screen language="python">OPENSTACK_NEUTRON_NETWORK = {
    ...
    'enable_router': False,
    'enable_quotas': False,
    'enable_distributed_router': False,
    'enable_ha_router': False,
    'enable_lb': False,
    'enable_firewall': False,
    'enable_vpn': False,
    'enable_fip_topology_check': False,
}</screen>
          </listitem>
          <listitem>
            <para>Optionally, configure the time zone:</para>
            <screen language="python">TIME_ZONE = "TIME_ZONE"</screen>
            <para>Replace <literal>TIME_ZONE</literal> with an appropriate time zone identifier.
                                For more information, see the <link xlink:href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">list of time zones</link>.</para>
          </listitem>
        </itemizedlist>
      </step>
    </procedure>
  </section>
  <section>
    <title>Finalize installation</title>
    <itemizedlist>
      <listitem>
        <para>Restart the web server and session storage service:</para>
        <screen language="console"># systemctl restart apache2.service memcached.service</screen>
        <note>
          <para>The <literal>systemctl restart</literal> command starts each service if
                            not currently running.</para>
        </note>
      </listitem>
    </itemizedlist>
  </section>
</section>
