<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>The horizon Module</title>
  <para>Horizon ships with a single point of contact for hooking into your project if
            you aren’t developing your own <xref linkend="horizon.Dashboard"/> or
            <xref linkend="horizon.Panel"/>:</para>
  <screen>import horizon</screen>
  <para>From there you can access all the key methods you need.</para>
  <section>
    <title>Horizon</title>
    <variablelist>
      <varlistentry xml:id="horizon.urls">
        <term>
          <property>horizon.urls</property>
        </term>
        <listitem>
          <para>The auto-generated URLconf for horizon. Usage:</para>
          <screen>url(r'', include(horizon.urls)),</screen>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.register">
        <term>
          <function>horizon.register</function>
        </term>
        <listitem>
          <para>Registers a <xref linkend="horizon.Dashboard"/> with Horizon.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.unregister">
        <term>
          <function>horizon.unregister</function>
        </term>
        <listitem>
          <para>Unregisters a <xref linkend="horizon.Dashboard"/> from Horizon.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.get_absolute_url">
        <term>
          <function>horizon.get_absolute_url</function>
        </term>
        <listitem>
          <para>Returns the default URL for Horizon’s URLconf.</para>
          <para>The default URL is determined by calling
                        <xref linkend="horizon.Dashboard.get_absolute_url"/>
                        on the <xref linkend="horizon.Dashboard"/> instance returned by
                        <xref linkend="horizon.get_default_dashboard"/>.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.get_user_home">
        <term>
          <function>horizon.get_user_home</function>
        </term>
        <listitem>
          <para>Returns the default URL for a particular user.</para>
          <para>This method can be used to customize where a user is sent when
                        they log in, etc. By default it returns the value of
                        <xref linkend="horizon.get_absolute_url"/>.</para>
          <para>An alternative function can be supplied to customize this behavior
                        by specifying a either a URL or a function which returns a URL via
                        the <literal>"user_home"</literal> key in <literal>HORIZON_CONFIG</literal>. Each of these
                        would be valid:</para>
          <screen>{"user_home": "/home",}  # A URL
{"user_home": "my_module.get_user_home",}  # Path to a function
{"user_home": lambda user: "/" + user.name,}  # A function
{"user_home": None,}  # Will always return the default dashboard</screen>
          <para>This can be useful if the default dashboard may not be accessible
                        to all users. When user_home is missing from HORIZON_CONFIG,
                        it will default to the settings.LOGIN_REDIRECT_URL value.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.get_dashboard">
        <term>
          <function>horizon.get_dashboard</function>
        </term>
        <listitem>
          <para>Returns the specified <xref linkend="horizon.Dashboard"/> instance.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.get_default_dashboard">
        <term>
          <function>horizon.get_default_dashboard</function>
        </term>
        <listitem>
          <para>Returns the default <xref linkend="horizon.Dashboard"/> instance.</para>
          <para>If <literal>"default_dashboard"</literal> is specified in <literal>HORIZON_CONFIG</literal>
                        then that dashboard will be returned. If not, the first dashboard
                        returned by <xref linkend="horizon.get_dashboards"/> will be returned.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry xml:id="horizon.get_dashboards">
        <term>
          <function>horizon.get_dashboards</function>
        </term>
        <listitem>
          <para>Returns an ordered tuple of <xref linkend="horizon.Dashboard"/> modules.</para>
          <para>Orders dashboards according to the <literal>"dashboards"</literal> key in
                        <literal>HORIZON_CONFIG</literal> or else returns all registered dashboards
                        in alphabetical order.</para>
          <para>Any remaining <xref linkend="horizon.Dashboard"/> classes registered with
                        Horizon but not listed in <literal>HORIZON_CONFIG['dashboards']</literal>
                        will be appended to the end of the list alphabetically.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Dashboard</title>
    <variablelist>
      <varlistentry xml:id="horizon.Dashboard">
        <term>
          <literal>horizon.Dashboard</literal>
        </term>
        <listitem>
          <para>A base class for defining Horizon dashboards.</para>
          <para>All Horizon dashboards should extend from this base class. It provides the
                        appropriate hooks for automatic discovery of <xref linkend="horizon.Panel"/>
                        modules, automatically constructing URLconfs, and providing
                        permission-based access control.</para>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.name">
              <term>
                <property>horizon.Dashboard.name</property>
              </term>
              <listitem>
                <para>The name of the dashboard. This will be displayed in the
                                auto-generated navigation and various other places.
                                Default: <literal>''</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.slug">
              <term>
                <property>horizon.Dashboard.slug</property>
              </term>
              <listitem>
                <para>A unique “short name” for the dashboard. The slug is used as
                                a component of the URL path for the dashboard. Default: <literal>''</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.panels">
              <term>
                <property>horizon.Dashboard.panels</property>
              </term>
              <listitem>
                <para>The <literal>panels</literal> attribute can be either a flat list containing the name
                                of each panel <emphasis role="bold">module</emphasis>  which should be loaded as part of this
                                dashboard, or a list of <xref linkend="horizon.PanelGroup"/> classes which
                                define groups of panels as in the following example:</para>
                <screen>class SystemPanels(horizon.PanelGroup):
    slug = "syspanel"
    name = _("System")
    panels = ('overview', 'instances', ...)

class Syspanel(horizon.Dashboard):
    panels = (SystemPanels,)</screen>
                <para>Automatically generated navigation will use the order of the
                                modules in this attribute.</para>
                <para>Default: <literal>[]</literal>.</para>
                <warning>
                  <para>The values for this attribute should not correspond to the
                                    <xref linkend="horizon.Panel.name"/> attributes of the <literal>Panel</literal> classes.
                                    They should be the names of the Python modules in which the
                                    <literal>panel.py</literal> files live. This is used for the automatic
                                    loading and registration of <literal>Panel</literal> classes much like
                                    Django’s <literal>ModelAdmin</literal> machinery.</para>
                  <para>Panel modules must be listed in <literal>panels</literal> in order to be
                                    discovered by the automatic registration mechanism.</para>
                </warning>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.default_panel">
              <term>
                <property>horizon.Dashboard.default_panel</property>
              </term>
              <listitem>
                <para>The name of the panel which should be treated as the default
                                panel for the dashboard, i.e. when you visit the root URL
                                for this dashboard, that’s the panel that is displayed.
                                Default: <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.permissions">
              <term>
                <property>horizon.Dashboard.permissions</property>
              </term>
              <listitem>
                <para>A list of permission names, all of which a user must possess in order
                                to access any panel registered with this dashboard. This attribute
                                is combined cumulatively with any permissions required on individual
                                <xref linkend="horizon.Panel"/> classes.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.urls">
              <term>
                <property>horizon.Dashboard.urls</property>
              </term>
              <listitem>
                <para>Optional path to a URLconf of additional views for this dashboard
                                which are not connected to specific panels. Default: <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.nav">
              <term>
                <property>horizon.Dashboard.nav</property>
              </term>
              <listitem>
                <para/>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry>
              <term>
                <property/>
              </term>
              <listitem>
                <para>The <literal>nav</literal> attribute can be either a boolean value or a callable
                                which accepts a <literal>RequestContext</literal> object as a single argument
                                to control whether or not this dashboard should appear in
                                automatically-generated navigation. Default: <literal>True</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.public">
              <term>
                <property>horizon.Dashboard.public</property>
              </term>
              <listitem>
                <para>Boolean value to determine whether this dashboard can be viewed
                                without being logged in. Defaults to <literal>False</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.allowed">
              <term>
                <property>horizon.Dashboard.allowed</property>
              </term>
              <listitem>
                <para>Checks for role based access for this dashboard.</para>
                <para>Checks for access to any panels in the dashboard and of the
                                dashboard itself.</para>
                <para>This method should be overridden to return the result of
                                any policy checks required for the user to access this dashboard
                                when more complex checks are required.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.get_absolute_url">
              <term>
                <property>horizon.Dashboard.get_absolute_url</property>
              </term>
              <listitem>
                <para>Returns the default URL for this dashboard.</para>
                <para>The default URL is defined as the URL pattern with <literal>name="index"</literal>
                                in the URLconf for the <xref linkend="horizon.Panel"/> specified by
                                <xref linkend="horizon.Dashboard.default_panel"/>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.get_panel">
              <term>
                <property>horizon.Dashboard.get_panel</property>
              </term>
              <listitem>
                <para>Returns the Panel instance registered with this dashboard.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.get_panel_group">
              <term>
                <property>horizon.Dashboard.get_panel_group</property>
              </term>
              <listitem>
                <para>Returns the specified :class:~horizon.PanelGroup.</para>
                <para>Returns None if not registered.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.get_panels">
              <term>
                <property>horizon.Dashboard.get_panels</property>
              </term>
              <listitem>
                <para>Returns the Panel instances registered with this dashboard in order.</para>
                <para>Panel grouping information is not included.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.register">
              <term>
                <property>horizon.Dashboard.register</property>
              </term>
              <listitem>
                <para>Registers a <xref linkend="horizon.Panel"/> with this dashboard.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Dashboard.unregister">
              <term>
                <property>horizon.Dashboard.unregister</property>
              </term>
              <listitem>
                <para>Unregisters a <xref linkend="horizon.Panel"/> from this dashboard.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Panel</title>
    <variablelist>
      <varlistentry xml:id="horizon.Panel">
        <term>
          <literal>horizon.Panel</literal>
        </term>
        <listitem>
          <para>A base class for defining Horizon dashboard panels.</para>
          <para>All Horizon dashboard panels should extend from this class. It provides
                        the appropriate hooks for automatically constructing URLconfs, and
                        providing permission-based access control.</para>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.name">
              <term>
                <property>horizon.Panel.name</property>
              </term>
              <listitem>
                <para>The name of the panel. This will be displayed in the
                                auto-generated navigation and various other places.
                                Default: <literal>''</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.slug">
              <term>
                <property>horizon.Panel.slug</property>
              </term>
              <listitem>
                <para>A unique “short name” for the panel. The slug is used as
                                a component of the URL path for the panel. Default: <literal>''</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.permissions">
              <term>
                <property>horizon.Panel.permissions</property>
              </term>
              <listitem>
                <para>A list of permission names, all of which a user must possess in order
                                to access any view associated with this panel. This attribute
                                is combined cumulatively with any permissions required on the
                                <literal>Dashboard</literal> class with which it is registered.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.urls">
              <term>
                <property>horizon.Panel.urls</property>
              </term>
              <listitem>
                <para>Path to a URLconf of views for this panel using dotted Python
                                notation. If no value is specified, a file called <literal>urls.py</literal>
                                living in the same package as the <literal>panel.py</literal> file is used.
                                Default: <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.nav">
              <term>
                <property>horizon.Panel.nav</property>
              </term>
              <listitem>
                <para/>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry>
              <term>
                <property/>
              </term>
              <listitem>
                <para>The <literal>nav</literal> attribute can be either a boolean value or a callable
                                which accepts a <literal>RequestContext</literal> object as a single argument
                                to control whether or not this panel should appear in
                                automatically-generated navigation. Default: <literal>True</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.index_url_name">
              <term>
                <property>horizon.Panel.index_url_name</property>
              </term>
              <listitem>
                <para>The <literal>name</literal> argument for the URL pattern which corresponds to
                                the index view for this <literal>Panel</literal>. This is the view that
                                <xref linkend="horizon.Panel.get_absolute_url"/> will attempt to reverse.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.can_register">
              <term>
                <property>horizon.Panel.can_register</property>
              </term>
              <listitem>
                <para>This optional static method can be used to specify conditions that
                                need to be satisfied to load this panel. Unlike <literal>permissions</literal> and
                                <literal>allowed</literal> this method is intended to handle settings based
                                conditions rather than user based permission and policy checks.
                                The return value is boolean. If the method returns <literal>True</literal>, then the
                                panel will be registered and available to user (if <literal>permissions</literal> and
                                <literal>allowed</literal> runtime checks are also satisfied). If the method returns
                                <literal>False</literal>, then the panel will not be registered and will not be
                                available via normal navigation or direct URL access.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.Panel.get_absolute_url">
              <term>
                <property>horizon.Panel.get_absolute_url</property>
              </term>
              <listitem>
                <para>Returns the default URL for this panel.</para>
                <para>The default URL is defined as the URL pattern with <literal>name="index"</literal> in
                                the URLconf for this panel.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Panel Group</title>
    <variablelist>
      <varlistentry xml:id="horizon.PanelGroup">
        <term>
          <literal>horizon.PanelGroup</literal>
        </term>
        <listitem>
          <para>A container for a set of <xref linkend="horizon.Panel"/> classes.</para>
          <para>When iterated, it will yield each of the <literal>Panel</literal> instances it
                        contains.</para>
          <variablelist>
            <varlistentry xml:id="horizon.PanelGroup.slug">
              <term>
                <property>horizon.PanelGroup.slug</property>
              </term>
              <listitem>
                <para>A unique string to identify this panel group. Required.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.PanelGroup.name">
              <term>
                <property>horizon.PanelGroup.name</property>
              </term>
              <listitem>
                <para>A user-friendly name which will be used as the group heading in
                                places such as the navigation. Default: <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.PanelGroup.panels">
              <term>
                <property>horizon.PanelGroup.panels</property>
              </term>
              <listitem>
                <para>A list of panel module names which should be contained within this
                                grouping.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</section>
