<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xml:id="ref-workflows">
  <title>Horizon Workflows</title>
  <para>One of the most challenging aspects of building a compelling user experience
            is crafting complex multi-part workflows. Horizon’s <literal>workflows</literal> module
            aims to bring that capability within everyday reach.</para>
  <formalpara>
    <title>See also</title>
    <para>For usage information, tips &amp; tricks and more examples check out the
                <xref linkend="topics-workflows"/>.</para>
  </formalpara>
  <section>
    <title>Workflows</title>
    <variablelist>
      <varlistentry xml:id="horizon.workflows.Workflow">
        <term>
          <literal>horizon.workflows.Workflow</literal>
        </term>
        <listitem>
          <para>A Workflow is a collection of Steps.</para>
          <para>Its interface is very straightforward, but it is responsible for handling
                        some very important tasks such as:</para>
          <itemizedlist>
            <listitem>
              <para>Handling the injection, removal, and ordering of arbitrary steps.</para>
            </listitem>
            <listitem>
              <para>Determining if the workflow can be completed by a given user at runtime
                                based on all available information.</para>
            </listitem>
            <listitem>
              <para>Dispatching connections between steps to ensure that when context data
                                changes all the applicable callback functions are executed.</para>
            </listitem>
            <listitem>
              <para>Verifying/validating the overall data integrity and subsequently
                                triggering the final method to complete the workflow.</para>
            </listitem>
          </itemizedlist>
          <para>The <literal>Workflow</literal> class has the following attributes:</para>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.name">
              <term>
                <property>horizon.workflows.Workflow.name</property>
              </term>
              <listitem>
                <para>The verbose name for this workflow which will be displayed to the user.
                                Defaults to the class name.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.slug">
              <term>
                <property>horizon.workflows.Workflow.slug</property>
              </term>
              <listitem>
                <para>The unique slug for this workflow. Required.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.steps">
              <term>
                <property>horizon.workflows.Workflow.steps</property>
              </term>
              <listitem>
                <para>Read-only access to the final ordered set of step instances for
                                this workflow.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.default_steps">
              <term>
                <property>horizon.workflows.Workflow.default_steps</property>
              </term>
              <listitem>
                <para>A list of <xref linkend="horizon.workflows.Step"/> classes which serve as the
                                starting point for this workflow’s ordered steps. Defaults to an empty
                                list (<literal>[]</literal>).</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.finalize_button_name">
              <term>
                <property>horizon.workflows.Workflow.finalize_button_name</property>
              </term>
              <listitem>
                <para>The name which will appear on the submit button for the workflow’s
                                form. Defaults to <literal>"Save"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.success_message">
              <term>
                <property>horizon.workflows.Workflow.success_message</property>
              </term>
              <listitem>
                <para>A string which will be displayed to the user upon successful completion
                                of the workflow. Defaults to
                                <literal>"{{ workflow.name }} completed successfully."</literal></para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.failure_message">
              <term>
                <property>horizon.workflows.Workflow.failure_message</property>
              </term>
              <listitem>
                <para>A string which will be displayed to the user upon failure to complete
                                the workflow. Defaults to <literal>"{{ workflow.name }} did not complete."</literal></para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.depends_on">
              <term>
                <property>horizon.workflows.Workflow.depends_on</property>
              </term>
              <listitem>
                <para>A roll-up list of all the <literal>depends_on</literal> values compiled from the
                                workflow’s steps.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.contributions">
              <term>
                <property>horizon.workflows.Workflow.contributions</property>
              </term>
              <listitem>
                <para>A roll-up list of all the <literal>contributes</literal> values compiled from the
                                workflow’s steps.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.template_name">
              <term>
                <property>horizon.workflows.Workflow.template_name</property>
              </term>
              <listitem>
                <para>Path to the template which should be used to render this workflow.
                                In general the default common template should be used. Default:
                                <literal>"horizon/common/_workflow.html"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.entry_point">
              <term>
                <property>horizon.workflows.Workflow.entry_point</property>
              </term>
              <listitem>
                <para>The slug of the step which should initially be active when the
                                workflow is rendered. This can be passed in upon initialization of
                                the workflow, or set anytime after initialization but before calling
                                either <literal>get_entry_point</literal> or <literal>render</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.redirect_param_name">
              <term>
                <property>horizon.workflows.Workflow.redirect_param_name</property>
              </term>
              <listitem>
                <para>The name of a parameter used for tracking the URL to redirect to upon
                                completion of the workflow. Defaults to <literal>"next"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.object">
              <term>
                <property>horizon.workflows.Workflow.object</property>
              </term>
              <listitem>
                <para>The object (if any) which this workflow relates to. In the case of
                                a workflow which creates a new resource the object would be the created
                                resource after the relevant creation steps have been undertaken. In
                                the case of a workflow which updates a resource it would be the
                                resource being updated after it has been retrieved.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.wizard">
              <term>
                <property>horizon.workflows.Workflow.wizard</property>
              </term>
              <listitem>
                <para>Whether to present the workflow as a wizard, with “prev” and “next”
                                buttons and validation after every step.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.add_error_to_step">
              <term>
                <property>horizon.workflows.Workflow.add_error_to_step</property>
              </term>
              <listitem>
                <para>Adds an error message to the workflow’s Step.</para>
                <para>This is useful when you wish for API errors to appear as errors
                                on the form rather than using the messages framework.</para>
                <para>The workflow’s Step is specified by its slug.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.finalize">
              <term>
                <property>horizon.workflows.Workflow.finalize</property>
              </term>
              <listitem>
                <para>Finalizes a workflow by running through all the actions.</para>
                <para>It runs all the actions in order and calling their <literal>handle</literal> methods.
                                Returns <literal>True</literal> on full success, or <literal>False</literal> for a partial success,
                                e.g. there were non-critical errors.
                                (If it failed completely the function wouldn’t return.)</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.format_status_message">
              <term>
                <property>horizon.workflows.Workflow.format_status_message</property>
              </term>
              <listitem>
                <para>Hook to allow customization of the message returned to the user.</para>
                <para>This is called upon both successful or unsuccessful completion of
                                the workflow.</para>
                <para>By default it simply inserts the workflow’s name into the message
                                string.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.get_absolute_url">
              <term>
                <property>horizon.workflows.Workflow.get_absolute_url</property>
              </term>
              <listitem>
                <para>Returns the canonical URL for this workflow.</para>
                <para>This is used for the POST action attribute on the form element
                                wrapping the workflow.</para>
                <para>For convenience it defaults to the value of
                                <literal>request.get_full_path()</literal> with any query string stripped off,
                                e.g. the path at which the workflow was requested.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.get_entry_point">
              <term>
                <property>horizon.workflows.Workflow.get_entry_point</property>
              </term>
              <listitem>
                <para>Returns the slug of the step which the workflow should begin on.</para>
                <para>This method takes into account both already-available data and errors
                                within the steps.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.get_step">
              <term>
                <property>horizon.workflows.Workflow.get_step</property>
              </term>
              <listitem>
                <para>Returns the instantiated step matching the given slug.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.get_success_url">
              <term>
                <property>horizon.workflows.Workflow.get_success_url</property>
              </term>
              <listitem>
                <para>Returns a URL to redirect the user to upon completion.</para>
                <para>By default it will attempt to parse a <literal>success_url</literal> attribute on the
                                workflow, which can take the form of a reversible URL pattern name,
                                or a standard HTTP URL.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.handle">
              <term>
                <property>horizon.workflows.Workflow.handle</property>
              </term>
              <listitem>
                <para>Handles any final processing for this workflow.</para>
                <para>Should return a boolean value indicating success.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.is_valid">
              <term>
                <property>horizon.workflows.Workflow.is_valid</property>
              </term>
              <listitem>
                <para>Verifies that all required data is present in the context.</para>
                <para>It also calls the <literal>validate</literal> method to allow for finer-grained checks
                                on the context data.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.register">
              <term>
                <property>horizon.workflows.Workflow.register</property>
              </term>
              <listitem>
                <para>Registers a <xref linkend="horizon.workflows.Step"/> with the workflow.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.render">
              <term>
                <property>horizon.workflows.Workflow.render</property>
              </term>
              <listitem>
                <para>Renders the workflow.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.unregister">
              <term>
                <property>horizon.workflows.Workflow.unregister</property>
              </term>
              <listitem>
                <para>Unregisters a <xref linkend="horizon.workflows.Step"/> from the workflow.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Workflow.validate">
              <term>
                <property>horizon.workflows.Workflow.validate</property>
              </term>
              <listitem>
                <para>Hook for custom context data validation.</para>
                <para>Should return a booleanvalue or
                                raise <xref linkend="horizon.exceptions.WorkflowValidationError"/>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Steps</title>
    <variablelist>
      <varlistentry xml:id="horizon.workflows.Step">
        <term>
          <literal>horizon.workflows.Step</literal>
        </term>
        <listitem>
          <para>A wrapper around an action which defines its context in a workflow.</para>
          <para>It knows about details such as:</para>
          <itemizedlist>
            <listitem>
              <para>The workflow’s context data (data passed from step to step).</para>
            </listitem>
            <listitem>
              <para>The data which must be present in the context to begin this step (the
                                step’s dependencies).</para>
            </listitem>
            <listitem>
              <para>The keys which will be added to the context data upon completion of the
                                step.</para>
            </listitem>
            <listitem>
              <para>The connections between this step’s fields and changes in the context
                                data (e.g. if that piece of data changes, what needs to be updated in
                                this step).</para>
            </listitem>
          </itemizedlist>
          <para>A <literal>Step</literal> class has the following attributes:</para>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.action_class">
              <term>
                <property>horizon.workflows.Step.action_class</property>
              </term>
              <listitem>
                <para>The <xref linkend="horizon.workflows.Action"/> class which this step wraps.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.depends_on">
              <term>
                <property>horizon.workflows.Step.depends_on</property>
              </term>
              <listitem>
                <para>A list of context data keys which this step requires in order to
                                begin interaction.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.contributes">
              <term>
                <property>horizon.workflows.Step.contributes</property>
              </term>
              <listitem>
                <para>A list of keys which this step will contribute to the workflow’s
                                context data. Optional keys should still be listed, even if their
                                values may be set to <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.connections">
              <term>
                <property>horizon.workflows.Step.connections</property>
              </term>
              <listitem>
                <para>A dictionary which maps context data key names to lists of callbacks.
                                The callbacks may be functions, dotted python paths to functions
                                which may be imported, or dotted strings beginning with <literal>"self"</literal>
                                to indicate methods on the current <literal>Step</literal> instance.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.before">
              <term>
                <property>horizon.workflows.Step.before</property>
              </term>
              <listitem>
                <para>Another <literal>Step</literal> class. This optional attribute is used to provide
                                control over workflow ordering when steps are dynamically added to
                                workflows. The workflow mechanism will attempt to place the current
                                step before the step specified in the attribute.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.after">
              <term>
                <property>horizon.workflows.Step.after</property>
              </term>
              <listitem>
                <para>Another <literal>Step</literal> class. This attribute has the same purpose as
                                <xref linkend="horizon.workflows.Step.before"/> except that it will instead
                                attempt to place the current step after the given step.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.help_text">
              <term>
                <property>horizon.workflows.Step.help_text</property>
              </term>
              <listitem>
                <para>A string of simple help text which will be prepended to the <literal>Action</literal>
                                class’ help text if desired.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.template_name">
              <term>
                <property>horizon.workflows.Step.template_name</property>
              </term>
              <listitem>
                <para>A path to a template which will be used to render this step. In
                                general the default common template should be used. Default:
                                <literal>"horizon/common/_workflow_step.html"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.has_errors">
              <term>
                <property>horizon.workflows.Step.has_errors</property>
              </term>
              <listitem>
                <para>A boolean value which indicates whether or not this step has any
                                errors on the action within it or in the scope of the workflow. This
                                attribute will only accurately reflect this status after validation
                                has occurred.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.slug">
              <term>
                <property>horizon.workflows.Step.slug</property>
              </term>
              <listitem>
                <para>Inherited from the <literal>Action</literal> class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.name">
              <term>
                <property>horizon.workflows.Step.name</property>
              </term>
              <listitem>
                <para>Inherited from the <literal>Action</literal> class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.permissions">
              <term>
                <property>horizon.workflows.Step.permissions</property>
              </term>
              <listitem>
                <para>Inherited from the <literal>Action</literal> class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.add_step_error">
              <term>
                <property>horizon.workflows.Step.add_step_error</property>
              </term>
              <listitem>
                <para>Adds an error to the Step based on API issues.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.allowed">
              <term>
                <property>horizon.workflows.Step.allowed</property>
              </term>
              <listitem>
                <para>Determines whether or not the step is displayed.</para>
                <para>Step instances can override this method to specify conditions under
                                which this tab should not be shown at all by returning <literal>False</literal>.</para>
                <para>The default behavior is to return <literal>True</literal> for all cases.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.contribute">
              <term>
                <property>horizon.workflows.Step.contribute</property>
              </term>
              <listitem>
                <para>Adds the data listed in <literal>contributes</literal> to the workflow’s context.</para>
                <para>By default, the context is simply updated with all the data
                                returned by the action.</para>
                <para>Note that even if the value of one of the <literal>contributes</literal> keys is
                                not present (e.g. optional) the key should still be added to the
                                context with a value of <literal>None</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.get_help_text">
              <term>
                <property>horizon.workflows.Step.get_help_text</property>
              </term>
              <listitem>
                <para>Returns the help text for this step.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.get_id">
              <term>
                <property>horizon.workflows.Step.get_id</property>
              </term>
              <listitem>
                <para>Returns the ID for this step. Suitable for use in HTML markup.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.has_required_fields">
              <term>
                <property>horizon.workflows.Step.has_required_fields</property>
              </term>
              <listitem>
                <para>Returns True if action contains any required fields.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.prepare_action_context">
              <term>
                <property>horizon.workflows.Step.prepare_action_context</property>
              </term>
              <listitem>
                <para>Hook to customize how the workflow context is passed to the action.</para>
                <para>This is the reverse of what “contribute” does to make the
                                action outputs sane for the workflow. Changes to the context are not
                                saved globally here. They are localized to the action.</para>
                <para>Simply returns the unaltered context by default.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Step.render">
              <term>
                <property>horizon.workflows.Step.render</property>
              </term>
              <listitem>
                <para>Renders the step.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Actions</title>
    <variablelist>
      <varlistentry xml:id="horizon.workflows.Action">
        <term>
          <literal>horizon.workflows.Action</literal>
        </term>
        <listitem>
          <para>An <literal>Action</literal> represents an atomic logical interaction with the system.</para>
          <para>This is easier to understand with a conceptual example: in the context of
                        a “launch instance” workflow, actions would include “naming the instance”,
                        “selecting an image”, and ultimately “launching the instance”.</para>
          <para>Because <literal>Actions</literal> are always interactive, they always provide form
                        controls, and thus inherit from Django’s <literal>Form</literal> class. However, they
                        have some additional intelligence added to them:</para>
          <itemizedlist>
            <listitem>
              <para><literal>Actions</literal> are aware of the permissions required to complete them.</para>
            </listitem>
            <listitem>
              <para><literal>Actions</literal> have a meta-level concept of “help text” which is meant to be
                                displayed in such a way as to give context to the action regardless of
                                where the action is presented in a site or workflow.</para>
            </listitem>
            <listitem>
              <para><literal>Actions</literal> understand how to handle their inputs and produce outputs,
                                much like <literal>SelfHandlingForm</literal> does now.</para>
            </listitem>
          </itemizedlist>
          <para><literal>Action</literal> classes may define the following attributes in a <literal>Meta</literal>
                        class within them:</para>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.name">
              <term>
                <property>horizon.workflows.Action.name</property>
              </term>
              <listitem>
                <para>The verbose name for this action. Defaults to the name of the class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.slug">
              <term>
                <property>horizon.workflows.Action.slug</property>
              </term>
              <listitem>
                <para>A semi-unique slug for this action. Defaults to the “slugified” name
                                of the class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.permissions">
              <term>
                <property>horizon.workflows.Action.permissions</property>
              </term>
              <listitem>
                <para>A list of permission names which this action requires in order to be
                                completed. Defaults to an empty list (<literal>[]</literal>).</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.policy_rules">
              <term>
                <property>horizon.workflows.Action.policy_rules</property>
              </term>
              <listitem>
                <para>list of scope and rule tuples to do policy checks on, the
                                composition of which is (scope, rule)</para>
                <itemizedlist>
                  <listitem>
                    <para>scope: service type managing the policy for action</para>
                  </listitem>
                  <listitem>
                    <para>rule: string representing the action to be checked</para>
                  </listitem>
                </itemizedlist>
                <para>for a policy that requires a single rule check:</para>
                <screen>policy_rules should look like
    "(("compute", "compute:create_instance"),)"</screen>
                <para>for a policy that requires multiple rule checks:</para>
                <screen>rules should look like
    "(("identity", "identity:list_users"),
      ("identity", "identity:list_roles"))"</screen>
                <para>where two service-rule clauses are OR-ed.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.help_text">
              <term>
                <property>horizon.workflows.Action.help_text</property>
              </term>
              <listitem>
                <para>A string of simple help text to be displayed alongside the Action’s
                                fields.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.help_text_template">
              <term>
                <property>horizon.workflows.Action.help_text_template</property>
              </term>
              <listitem>
                <para>A path to a template which contains more complex help text to be
                                displayed alongside the Action’s fields. In conjunction with
                                <xref linkend="horizon.workflows.Action.get_help_text"/> method you can
                                customize your help text template to display practically anything.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.add_action_error">
              <term>
                <property>horizon.workflows.Action.add_action_error</property>
              </term>
              <listitem>
                <para>Adds an error to the Action’s Step based on API issues.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.get_help_text">
              <term>
                <property>horizon.workflows.Action.get_help_text</property>
              </term>
              <listitem>
                <para>Returns the help text for this step.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.Action.handle">
              <term>
                <property>horizon.workflows.Action.handle</property>
              </term>
              <listitem>
                <para>Handles any requisite processing for this action.</para>
                <para>The method should return either <literal>None</literal> or a dictionary of data
                                to be passed to <xref linkend="horizon.workflows.Step.contribute"/>.</para>
                <para>Returns <literal>None</literal> by default, effectively making it a no-op.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>WorkflowView</title>
    <variablelist>
      <varlistentry xml:id="horizon.workflows.WorkflowView">
        <term>
          <literal>horizon.workflows.WorkflowView</literal>
        </term>
        <listitem>
          <para>A generic view which handles the intricacies of workflow processing.</para>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.workflow_class">
              <term>
                <property>horizon.workflows.WorkflowView.workflow_class</property>
              </term>
              <listitem>
                <para>The <xref linkend="horizon.workflows.Workflow"/> class which this view handles.
                                Required.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.template_name">
              <term>
                <property>horizon.workflows.WorkflowView.template_name</property>
              </term>
              <listitem>
                <para>The template to use when rendering this view via standard HTTP
                                requests. Required.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.ajax_template_name">
              <term>
                <property>horizon.workflows.WorkflowView.ajax_template_name</property>
              </term>
              <listitem>
                <para>The template to use when rendering the workflow for AJAX requests.
                                In general the default common template should be used. Defaults to
                                <literal>"horizon/common/_workflow.html"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.context_object_name">
              <term>
                <property>horizon.workflows.WorkflowView.context_object_name</property>
              </term>
              <listitem>
                <para>The key which should be used for the workflow object in the template
                                context. Defaults to <literal>"workflow"</literal>.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get">
              <term>
                <property>horizon.workflows.WorkflowView.get</property>
              </term>
              <listitem>
                <para>Handler for HTTP GET requests.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get_context_data">
              <term>
                <property>horizon.workflows.WorkflowView.get_context_data</property>
              </term>
              <listitem>
                <para>Returns the template context, including the workflow class.</para>
                <para>This method should be overridden in subclasses to provide additional
                                context data to the template.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get_initial">
              <term>
                <property>horizon.workflows.WorkflowView.get_initial</property>
              </term>
              <listitem>
                <para>Returns initial data for the workflow.</para>
                <para>Defaults to using the GET parameters
                                to allow pre-seeding of the workflow context values.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get_layout">
              <term>
                <property>horizon.workflows.WorkflowView.get_layout</property>
              </term>
              <listitem>
                <para>Returns classes for the workflow element in template.</para>
                <para>The returned classes are determied based on
                                the workflow characteristics.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get_template_names">
              <term>
                <property>horizon.workflows.WorkflowView.get_template_names</property>
              </term>
              <listitem>
                <para>Returns the template name to use for this request.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.get_workflow">
              <term>
                <property>horizon.workflows.WorkflowView.get_workflow</property>
              </term>
              <listitem>
                <para>Returns the instantiated workflow class.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.post">
              <term>
                <property>horizon.workflows.WorkflowView.post</property>
              </term>
              <listitem>
                <para>Handler for HTTP POST requests.</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <variablelist>
            <varlistentry xml:id="horizon.workflows.WorkflowView.validate_steps">
              <term>
                <property>horizon.workflows.WorkflowView.validate_steps</property>
              </term>
              <listitem>
                <para>Validates the workflow steps from <literal>start</literal> to <literal>end</literal>, inclusive.</para>
                <para>Returns a dict describing the validation state of the workflow.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</section>
